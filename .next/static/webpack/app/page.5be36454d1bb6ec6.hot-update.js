"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MusicPlayerApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/home.js\");\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _components_HomePage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/HomePage */ \"(app-pages-browser)/./components/HomePage.tsx\");\n/* harmony import */ var _components_SearchPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/SearchPage */ \"(app-pages-browser)/./components/SearchPage.tsx\");\n/* harmony import */ var _components_SettingsPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/SettingsPage */ \"(app-pages-browser)/./components/SettingsPage.tsx\");\n/* harmony import */ var _components_PlaylistsPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/PlaylistsPage */ \"(app-pages-browser)/./components/PlaylistsPage.tsx\");\n/* harmony import */ var _components_LikedSongsPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/LikedSongsPage */ \"(app-pages-browser)/./components/LikedSongsPage.tsx\");\n/* harmony import */ var _components_MinimizedPlayer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/MinimizedPlayer */ \"(app-pages-browser)/./components/MinimizedPlayer.tsx\");\n/* harmony import */ var _components_MaximizedPlayer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/MaximizedPlayer */ \"(app-pages-browser)/./components/MaximizedPlayer.tsx\");\n/* harmony import */ var _components_CreatePlaylistModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/CreatePlaylistModal */ \"(app-pages-browser)/./components/CreatePlaylistModal.tsx\");\n/* harmony import */ var _components_AddToPlaylistModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/AddToPlaylistModal */ \"(app-pages-browser)/./components/AddToPlaylistModal.tsx\");\n/* harmony import */ var _components_AuthWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/AuthWrapper */ \"(app-pages-browser)/./components/AuthWrapper.tsx\");\n/* harmony import */ var _hooks_useAuth__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/hooks/useAuth */ \"(app-pages-browser)/./hooks/useAuth.ts\");\n/* harmony import */ var _hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/hooks/useSupabaseData */ \"(app-pages-browser)/./hooks/useSupabaseData.ts\");\n/* harmony import */ var _hooks_useQueue__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/hooks/useQueue */ \"(app-pages-browser)/./hooks/useQueue.ts\");\n/* harmony import */ var _components_ThemeContext__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/ThemeContext */ \"(app-pages-browser)/./components/ThemeContext.tsx\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-hot-toast */ \"(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction MusicPlayerContent() {\n    _s();\n    const { user } = (0,_hooks_useAuth__WEBPACK_IMPORTED_MODULE_12__.useAuth)();\n    const { songs, playlists, likedSongs, lastPlayedSong, loading, toggleLike, createPlaylist, deletePlaylist, renamePlaylist, addSongToPlaylist, removeSongFromPlaylist, recordListeningHistory, stopCurrentSongTracking, getPersonalizedSongs, getSmartPersonalizedSongs } = (0,_hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_13__.useSupabaseData)(user);\n    const { queue, addToQueue, removeFromQueue, getNextSongFromQueue, clearQueue, hasQueue } = (0,_hooks_useQueue__WEBPACK_IMPORTED_MODULE_14__.useQueue)();\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"home\");\n    const [currentPage, setCurrentPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"main\");\n    const [currentSong, setCurrentSong] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isPlayerMaximized, setIsPlayerMaximized] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showCreatePlaylistModal, setShowCreatePlaylistModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showAddToPlaylistModal, setShowAddToPlaylistModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedSongForPlaylist, setSelectedSongForPlaylist] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasSetLastPlayedSong, setHasSetLastPlayedSong] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastPlayedSongDismissed, setLastPlayedSongDismissed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { isDarkMode, toggleTheme } = (0,_components_ThemeContext__WEBPACK_IMPORTED_MODULE_15__.useTheme)();\n    const [displayCount, setDisplayCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(15);\n    const [imageUrls, setImageUrls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [audioUrl, setAudioUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [duration, setDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [volume, setVolume] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0.75); // default 75%\n    const [isSeeking, setIsSeeking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [pendingSeekTime, setPendingSeekTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isExternallySeeking, setIsExternallySeeking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [recommendedQueue, setRecommendedQueue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [playedSongs, setPlayedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [personalizedList, setPersonalizedList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentSongIndex, setCurrentSongIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [listenedSongs, setListenedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [isFetchingMore, setIsFetchingMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Smart recommendation system state\n    const [currentBatchListenedSongs, setCurrentBatchListenedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [songStartTime, setSongStartTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [batchStartIndex, setBatchStartIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Shuffle and repeat state\n    const [isShuffleEnabled, setIsShuffleEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true); // Shuffle on by default\n    const [repeatMode, setRepeatMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"off\");\n    const loadMoreSongs = ()=>{\n        setDisplayCount((prev)=>prev + 15);\n    };\n    const displayedSongs = songs.slice(0, displayCount);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadAudio = async ()=>{\n            if (currentSong === null || currentSong === void 0 ? void 0 : currentSong.file_id) {\n                const url = \"/api/audio-proxy?fileid=\".concat(currentSong.file_id);\n                setAudioUrl(url);\n                setDuration(0);\n                setCurrentTime(0);\n                setPendingSeekTime(null);\n            }\n        };\n        loadAudio();\n    }, [\n        currentSong === null || currentSong === void 0 ? void 0 : currentSong.file_id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (audioRef.current) {\n            audioRef.current.volume = volume;\n        }\n    }, [\n        volume\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const audio = audioRef.current;\n        if (!audio) return;\n        if (!isNaN(audio.duration) && isPlaying) {\n            // Duration is valid, safe to play\n            audio.play().catch((e)=>{\n                console.error(\"Playback error:\", e);\n            });\n        } else if (!isPlaying) {\n            audio.pause();\n        }\n    }, [\n        isPlaying\n    ]);\n    // Load images for currently displayed songs\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchImages = async ()=>{\n            const newUrls = {};\n            // Songs from the main feed\n            const songsToLoad = songs.slice(0, displayCount);\n            for (const song of songsToLoad){\n                if (!imageUrls[song.id]) {\n                    newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                }\n            }\n            // Songs from playlists\n            for (const playlist of playlists){\n                for (const song of playlist.songs){\n                    if (!imageUrls[song.id]) {\n                        newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                    }\n                }\n            }\n            // Liked songs\n            for (const song of likedSongs){\n                if (!imageUrls[song.id]) {\n                    newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                }\n            }\n            // Apply if new URLs found\n            if (Object.keys(newUrls).length > 0) {\n                setImageUrls((prev)=>({\n                        ...prev,\n                        ...newUrls\n                    }));\n            }\n        };\n        fetchImages();\n    }, [\n        displayCount,\n        songs,\n        playlists,\n        likedSongs\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"\\uD83C\\uDFB5 personalizedList updated:\", personalizedList);\n    }, [\n        personalizedList\n    ]);\n    // Set last played song as current song when data loads (only once and if not dismissed)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadLastPlayedImage = async ()=>{\n            if (user && lastPlayedSong && !hasSetLastPlayedSong && !lastPlayedSongDismissed) {\n                try {\n                    console.log(\"\\uD83C\\uDFB5 Loading initial personalized songs for last played song\");\n                    const initialRecs = await getPersonalizedSongs(user.id, lastPlayedSong, listenedSongs);\n                    const filtered = initialRecs.filter((song)=>!playedSongs.has(song.file_id.toString()));\n                    const newPersonalizedList = [\n                        lastPlayedSong,\n                        ...filtered.slice(0, 4)\n                    ];\n                    setPersonalizedList(newPersonalizedList);\n                    console.log(\"✅ Initial personalized list set:\", newPersonalizedList.length, \"songs\");\n                } catch (error) {\n                    console.error(\"❌ Error loading initial personalized songs:\", error);\n                    setPersonalizedList([\n                        lastPlayedSong\n                    ]);\n                }\n                setCurrentSong(lastPlayedSong);\n                setHasSetLastPlayedSong(true);\n                // Add to listened songs and log\n                setListenedSongs((prev)=>{\n                    const newSet = new Set(prev);\n                    newSet.add(lastPlayedSong.file_id.toString());\n                    console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                    return newSet;\n                });\n                if (!imageUrls[lastPlayedSong.img_id]) {\n                    const url = \"/api/image-proxy?fileid=\".concat(lastPlayedSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [lastPlayedSong.img_id]: url\n                        }));\n                }\n            }\n        };\n        loadLastPlayedImage();\n    }, [\n        lastPlayedSong,\n        hasSetLastPlayedSong,\n        lastPlayedSongDismissed,\n        user,\n        getPersonalizedSongs\n    ]);\n    const handleSongPlay = async (song)=>{\n        // Record if previous song was listened to (>20 seconds)\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            if (listenDuration > 20) {\n                console.log('✅ User listened to \"'.concat(currentSong.name, '\" for ').concat(listenDuration.toFixed(1), \" seconds\"));\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            } else {\n                console.log('⏭️ User skipped \"'.concat(currentSong.name, '\" after ').concat(listenDuration.toFixed(1), \" seconds\"));\n            }\n        }\n        setCurrentSong(song);\n        setIsPlaying(true);\n        setLastPlayedSongDismissed(false);\n        recordListeningHistory(song.id);\n        setSongStartTime(new Date()); // Track when this song started\n        // Add to listened songs and log\n        setListenedSongs((prev)=>{\n            const newSet = new Set(prev);\n            newSet.add(song.file_id.toString());\n            console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n            return newSet;\n        });\n        setPlayedSongs((prev)=>{\n            const updated = new Set(prev);\n            updated.add(song.file_id.toString());\n            return updated;\n        });\n        if (user) {\n            try {\n                console.log(\"\\uD83C\\uDFB5 Fetching personalized songs for:\", song.name);\n                const recs = await getPersonalizedSongs(user.id, song, listenedSongs);\n                const filtered = recs.filter((s)=>!playedSongs.has(s.file_id.toString()));\n                const newPersonalizedList = [\n                    song,\n                    ...filtered.slice(0, 4)\n                ];\n                setPersonalizedList(newPersonalizedList);\n                setCurrentSongIndex(0);\n                setBatchStartIndex(0);\n                setCurrentBatchListenedSongs([]); // Reset batch for new song selection\n                console.log(\"✅ New personalized list set:\", newPersonalizedList.length, \"songs\");\n            } catch (error) {\n                console.error(\"❌ Error fetching personalized songs:\", error);\n                setPersonalizedList([\n                    song\n                ]);\n                setCurrentSongIndex(0);\n                setBatchStartIndex(0);\n                setCurrentBatchListenedSongs([]);\n            }\n        }\n    };\n    const handleAddToQueue = (song)=>{\n        addToQueue(song);\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_16__.toast.success('Added \"'.concat(song.name, '\" to queue'));\n    };\n    const togglePlay = ()=>{\n        setIsPlaying(!isPlaying);\n    };\n    const togglePlayerSize = ()=>{\n        setIsPlayerMaximized(!isPlayerMaximized);\n    };\n    const closePlayer = async ()=>{\n        // Stop tracking current song before closing\n        await stopCurrentSongTracking();\n        setCurrentSong(null);\n        setIsPlaying(false);\n        setIsPlayerMaximized(false);\n        // Mark last played song as dismissed so it won't auto-load again\n        setLastPlayedSongDismissed(true);\n    };\n    const handleToggleLike = (songId)=>{\n        toggleLike(songId);\n        // Update current song state if it's the one being liked/unliked\n        if (currentSong && currentSong.id === songId) {\n            setCurrentSong((prev)=>prev ? {\n                    ...prev,\n                    isLiked: !prev.isLiked\n                } : null);\n        }\n    };\n    const handlePrevious = ()=>{\n        // Record if current song was listened to before going to previous\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            if (listenDuration > 20) {\n                console.log('✅ User listened to \"'.concat(currentSong.name, '\" for ').concat(listenDuration.toFixed(1), \" seconds\"));\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            }\n        }\n        if (!currentSong) return;\n        // Check if there's a previous song in the personalized list\n        if (currentSongIndex > 0) {\n            const prevIndex = currentSongIndex - 1;\n            const prevSong = personalizedList[prevIndex];\n            if (prevSong) {\n                setCurrentSong(prevSong);\n                setCurrentSongIndex(prevIndex);\n                setIsPlaying(true);\n                setLastPlayedSongDismissed(false);\n                recordListeningHistory(prevSong.id);\n                setSongStartTime(new Date());\n                // Add to listened songs and log\n                setListenedSongs((prev)=>{\n                    const newSet = new Set(prev);\n                    newSet.add(prevSong.file_id.toString());\n                    console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                    return newSet;\n                });\n                setPlayedSongs((prev)=>{\n                    const updated = new Set(prev);\n                    updated.add(prevSong.file_id.toString());\n                    return updated;\n                });\n                // Preload image\n                if (!imageUrls[prevSong.img_id]) {\n                    const newUrl = \"/api/image-proxy?fileid=\".concat(prevSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [prevSong.img_id]: newUrl\n                        }));\n                }\n            }\n        } else {\n            // If at the beginning, just restart current song\n            setCurrentTime(0);\n            setIsPlaying(true);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!currentSong) return;\n        const currentIndex = songs.findIndex((song)=>song.id === currentSong.id);\n        const nextIndex = currentIndex < songs.length - 1 ? currentIndex + 1 : 0;\n        const nextSong = songs[nextIndex];\n        // Preload next song image if not in cache\n        if (nextSong && !imageUrls[nextSong.img_id]) {\n            const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n            setImageUrls((prev)=>({\n                    ...prev,\n                    [nextSong.img_id]: newUrl\n                }));\n        }\n    }, [\n        currentSong,\n        songs\n    ]);\n    const handleLoadedMetadata = async ()=>{\n        const audio = audioRef.current;\n        if (!audio) return;\n        const loadedDuration = audio.duration;\n        if (!isNaN(loadedDuration) && isFinite(loadedDuration)) {\n            setDuration(loadedDuration);\n            if (pendingSeekTime !== null) {\n                audio.currentTime = pendingSeekTime;\n                setCurrentTime(pendingSeekTime);\n                setPendingSeekTime(null);\n            } else {\n                setCurrentTime(audio.currentTime);\n            }\n            try {\n                if (isPlaying) {\n                    await audio.play();\n                }\n            } catch (err) {\n                console.error(\"Auto-play error after metadata load:\", err);\n            }\n        } else {\n            // Retry metadata read\n            setTimeout(handleLoadedMetadata, 100);\n        }\n    };\n    const handleNext = async ()=>{\n        // Record if current song was listened to before going to next\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            if (listenDuration > 20) {\n                console.log('✅ User listened to \"'.concat(currentSong.name, '\" for ').concat(listenDuration.toFixed(1), \" seconds\"));\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            } else {\n                console.log('⏭️ User skipped \"'.concat(currentSong.name, '\" after ').concat(listenDuration.toFixed(1), \" seconds\"));\n            }\n        }\n        if (!currentSong) return;\n        // Check if there's a song in the queue first\n        const nextQueueSong = getNextSongFromQueue();\n        if (nextQueueSong) {\n            setCurrentSong(nextQueueSong);\n            setIsPlaying(true);\n            setLastPlayedSongDismissed(false);\n            recordListeningHistory(nextQueueSong.id);\n            setSongStartTime(new Date());\n            // Add to listened songs and log\n            setListenedSongs((prev)=>{\n                const newSet = new Set(prev);\n                newSet.add(nextQueueSong.file_id.toString());\n                console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                return newSet;\n            });\n            // Update personalized list with the queue song\n            if (user) {\n                const recs = await getPersonalizedSongs(user.id, nextQueueSong, listenedSongs);\n                const filtered = recs.filter((s)=>!playedSongs.has(s.file_id));\n                const newPersonalizedList = [\n                    nextQueueSong,\n                    ...filtered.slice(0, 4)\n                ];\n                setPersonalizedList(newPersonalizedList);\n                setCurrentSongIndex(0);\n            }\n            // Preload image\n            if (!imageUrls[nextQueueSong.img_id]) {\n                const newUrl = \"/api/image-proxy?fileid=\".concat(nextQueueSong.img_id);\n                setImageUrls((prev)=>({\n                        ...prev,\n                        [nextQueueSong.img_id]: newUrl\n                    }));\n            }\n            return;\n        }\n        // Check if we're at the second-to-last song and need to fetch smart recommendations\n        if (currentSongIndex === personalizedList.length - 2 && !isFetchingMore && user && currentSong) {\n            console.log(\"\\uD83E\\uDDE0 At second-to-last song, checking for smart recommendations...\");\n            setIsFetchingMore(true);\n            try {\n                let newRecs = [];\n                // If we have songs that user actually listened to in current batch, use smart recommendations\n                if (currentBatchListenedSongs.length > 0) {\n                    console.log(\"\\uD83E\\uDDE0 Using smart recommendations based on listened songs\");\n                    newRecs = await getSmartPersonalizedSongs(user.id, currentBatchListenedSongs, new Set([\n                        ...Array.from(listenedSongs),\n                        ...personalizedList.map((s)=>s.file_id.toString())\n                    ]));\n                } else {\n                    console.log(\"\\uD83C\\uDFB5 No listened songs in batch, using regular recommendations\");\n                    newRecs = await getPersonalizedSongs(user.id, currentSong, listenedSongs);\n                }\n                const filtered = newRecs.filter((song)=>!playedSongs.has(song.file_id.toString()) && !listenedSongs.has(song.file_id.toString()) && !personalizedList.some((existing)=>existing.file_id === song.file_id));\n                if (filtered.length > 0) {\n                    setPersonalizedList((prev)=>[\n                            ...prev,\n                            ...filtered.slice(0, 5)\n                        ]);\n                    console.log(\"✅ Added\", filtered.slice(0, 5).length, \"smart recommendations to personalized list\");\n                }\n            } catch (error) {\n                console.error(\"❌ Error fetching smart recommendations:\", error);\n            } finally{\n                setIsFetchingMore(false);\n            }\n        }\n        // If no queue, proceed with personalized list\n        const nextIndex = currentSongIndex + 1;\n        if (nextIndex < personalizedList.length) {\n            const nextSong = personalizedList[nextIndex];\n            setCurrentSong(nextSong);\n            setCurrentSongIndex(nextIndex);\n            setIsPlaying(true);\n            setLastPlayedSongDismissed(false);\n            recordListeningHistory(nextSong.id);\n            setSongStartTime(new Date());\n            // Add to listened songs and log\n            setListenedSongs((prev)=>{\n                const newSet = new Set(prev);\n                newSet.add(nextSong.file_id.toString());\n                console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                return newSet;\n            });\n            setPlayedSongs((prev)=>{\n                const updated = new Set(prev);\n                updated.add(String(nextSong.file_id));\n                return updated;\n            });\n            // Preload image\n            if (!imageUrls[nextSong.img_id]) {\n                const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n                setImageUrls((prev)=>({\n                        ...prev,\n                        [nextSong.img_id]: newUrl\n                    }));\n            }\n        } else {\n            // If we've reached the end of personalized list, get new smart recommendations\n            if (user && currentSong) {\n                try {\n                    console.log(\"\\uD83E\\uDDE0 Reached end of list, fetching new smart recommendations\");\n                    let newRecs = [];\n                    // Use smart recommendations if we have listened songs in current batch\n                    if (currentBatchListenedSongs.length > 0) {\n                        console.log(\"\\uD83E\\uDDE0 Using smart recommendations for new batch\");\n                        newRecs = await getSmartPersonalizedSongs(user.id, currentBatchListenedSongs, listenedSongs);\n                    } else {\n                        console.log(\"\\uD83C\\uDFB5 Using regular recommendations for new batch\");\n                        newRecs = await getPersonalizedSongs(user.id, currentSong, listenedSongs);\n                    }\n                    const filtered = newRecs.filter((song)=>!playedSongs.has(song.file_id.toString()) && !listenedSongs.has(song.file_id.toString()));\n                    if (filtered.length > 0) {\n                        const nextSong = filtered[0];\n                        setCurrentSong(nextSong);\n                        setIsPlaying(true);\n                        setLastPlayedSongDismissed(false);\n                        recordListeningHistory(nextSong.id);\n                        setSongStartTime(new Date());\n                        // Add to listened songs and log\n                        setListenedSongs((prev)=>{\n                            const newSet = new Set(prev);\n                            newSet.add(nextSong.file_id.toString());\n                            console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                            return newSet;\n                        });\n                        // Create new personalized list starting with this song\n                        const newPersonalizedList = [\n                            nextSong,\n                            ...filtered.slice(1, 5)\n                        ];\n                        setPersonalizedList(newPersonalizedList);\n                        setCurrentSongIndex(0);\n                        setBatchStartIndex(0);\n                        setCurrentBatchListenedSongs([]); // Reset batch for new recommendations\n                        setPlayedSongs((prev)=>{\n                            const updated = new Set(prev);\n                            updated.add(nextSong.file_id.toString());\n                            return updated;\n                        });\n                        // Preload image\n                        if (!imageUrls[nextSong.img_id]) {\n                            const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n                            setImageUrls((prev)=>({\n                                    ...prev,\n                                    [nextSong.img_id]: newUrl\n                                }));\n                        }\n                        console.log(\"✅ New smart recommendations loaded:\", newPersonalizedList.length, \"songs\");\n                    } else {\n                        console.warn(\"⚠️ No more smart recommendations available\");\n                    }\n                } catch (error) {\n                    console.error(\"❌ Error fetching new smart recommendations:\", error);\n                }\n            }\n        }\n    };\n    const formatNumber = (num)=>{\n        if (num >= 1000000) {\n            return (num / 1000000).toFixed(1) + \"M\";\n        } else if (num >= 1000) {\n            return (num / 1000).toFixed(1) + \"K\";\n        }\n        return num.toString();\n    };\n    const handleAddToPlaylist = (song)=>{\n        setSelectedSongForPlaylist(song);\n        setShowAddToPlaylistModal(true);\n    };\n    const handleSongEnd = async ()=>{\n        // Record if song was listened to completely (assume >20 seconds if it ended naturally)\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            console.log('\\uD83C\\uDFB5 Song \"'.concat(currentSong.name, '\" ended after ').concat(listenDuration.toFixed(1), \" seconds\"));\n            if (listenDuration > 20) {\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            }\n        }\n        // Handle repeat modes\n        if (repeatMode === \"once\" || repeatMode === \"infinite\") {\n            // Restart the current song\n            setCurrentTime(0);\n            setIsPlaying(true);\n            setSongStartTime(new Date());\n            // If repeat once, turn off repeat after playing once\n            if (repeatMode === \"once\") {\n                setRepeatMode(\"off\");\n            }\n            return;\n        }\n        // When a song ends, automatically play the next one\n        await handleNext();\n    };\n    const renderContent = ()=>{\n        if (currentPage === \"playlists\") {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_PlaylistsPage__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                playlists: playlists,\n                onBack: ()=>setCurrentPage(\"main\"),\n                onSongPlay: handleSongPlay,\n                onAddToQueue: handleAddToQueue,\n                onCreatePlaylist: ()=>setShowCreatePlaylistModal(true),\n                onDeletePlaylist: deletePlaylist,\n                onRenamePlaylist: renamePlaylist,\n                onRemoveSongFromPlaylist: removeSongFromPlaylist,\n                imageUrls: imageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 673,\n                columnNumber: 9\n            }, this);\n        }\n        if (currentPage === \"liked\") {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LikedSongsPage__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                songs: likedSongs,\n                onBack: ()=>setCurrentPage(\"main\"),\n                onSongPlay: handleSongPlay,\n                onAddToQueue: handleAddToQueue,\n                imageUrls: imageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 688,\n                columnNumber: 14\n            }, this);\n        }\n        switch(activeTab){\n            case \"home\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HomePage__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    songs: displayedSongs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    onLoadMore: loadMoreSongs,\n                    hasMoreSongs: displayCount < songs.length\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 693,\n                    columnNumber: 16\n                }, this);\n            case \"search\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SearchPage__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                    songs: songs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    setImageUrls: setImageUrls\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 704,\n                    columnNumber: 16\n                }, this);\n            case \"settings\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SettingsPage__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    onPlaylistsClick: ()=>setCurrentPage(\"playlists\"),\n                    onLikedClick: ()=>setCurrentPage(\"liked\")\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 714,\n                    columnNumber: 16\n                }, this);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HomePage__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    songs: displayedSongs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    onLoadMore: loadMoreSongs,\n                    hasMoreSongs: displayCount < songs.length\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 716,\n                    columnNumber: 16\n                }, this);\n        }\n    };\n    const themeClasses = isDarkMode ? \"bg-gray-900 text-white\" : \"bg-gray-50 text-gray-900\";\n    const setCurrentTimeState = setCurrentTime;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen \".concat(themeClasses, \" relative overflow-hidden\"),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"transition-all duration-300 \".concat(currentSong ? \"pb-36\" : \"pb-20\"),\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 738,\n                columnNumber: 9\n            }, this),\n            currentPage === \"main\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-0 left-0 right-0 \".concat(isDarkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-200\", \" border-t z-30\"),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-around py-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"home\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"home\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 752,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Home\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 753,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 746,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"search\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"search\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 761,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Search\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 762,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 755,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"settings\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"settings\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 770,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Settings\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 771,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 764,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 745,\n                    columnNumber: 13\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 744,\n                columnNumber: 11\n            }, this),\n            currentSong && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: !isPlayerMaximized ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MinimizedPlayer__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    song: currentSong,\n                    isPlaying: isPlaying,\n                    imageUrl: imageUrls[currentSong.img_id],\n                    onTogglePlay: togglePlay,\n                    onMaximize: togglePlayerSize,\n                    onPrevious: handlePrevious,\n                    onNext: handleNext,\n                    onClose: closePlayer,\n                    onToggleLike: ()=>handleToggleLike(currentSong.id),\n                    formatNumber: formatNumber,\n                    currentTime: currentTime,\n                    duration: duration\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 781,\n                    columnNumber: 15\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MaximizedPlayer__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                    song: currentSong,\n                    isPlaying: isPlaying,\n                    imageUrl: imageUrls[currentSong.img_id],\n                    onTogglePlay: togglePlay,\n                    onMinimize: togglePlayerSize,\n                    onPrevious: handlePrevious,\n                    onNext: handleNext,\n                    onToggleLike: ()=>handleToggleLike(currentSong.id),\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: ()=>handleAddToPlaylist(currentSong),\n                    currentTime: currentTime,\n                    duration: duration,\n                    setCurrentTime: (seekTime)=>{\n                        if (audioRef.current && !isNaN(audioRef.current.duration)) {\n                            setIsExternallySeeking(true);\n                            audioRef.current.currentTime = seekTime;\n                            setCurrentTimeState(seekTime);\n                            setTimeout(()=>setIsExternallySeeking(false), 200);\n                        } else {\n                            setPendingSeekTime(seekTime); // Will apply onLoadedMetadata\n                        }\n                    },\n                    volume: volume,\n                    setVolume: setVolume,\n                    isSeeking: isSeeking,\n                    setIsSeeking: setIsSeeking,\n                    queue: queue,\n                    onRemoveFromQueue: removeFromQueue,\n                    onSongPlay: handleSongPlay,\n                    imageUrls: imageUrls,\n                    isShuffleEnabled: isShuffleEnabled,\n                    setIsShuffleEnabled: setIsShuffleEnabled,\n                    repeatMode: repeatMode,\n                    setRepeatMode: setRepeatMode\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 796,\n                    columnNumber: 15\n                }, this)\n            }, void 0, false),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CreatePlaylistModal__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                isOpen: showCreatePlaylistModal,\n                onClose: ()=>setShowCreatePlaylistModal(false),\n                onCreatePlaylist: createPlaylist\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 841,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AddToPlaylistModal__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                isOpen: showAddToPlaylistModal,\n                onClose: ()=>{\n                    setShowAddToPlaylistModal(false);\n                    setSelectedSongForPlaylist(null);\n                },\n                song: selectedSongForPlaylist,\n                playlists: playlists,\n                onAddToPlaylist: addSongToPlaylist,\n                onCreatePlaylist: ()=>{\n                    setShowAddToPlaylistModal(false);\n                    setShowCreatePlaylistModal(true);\n                },\n                imageUrls: imageUrls,\n                setImageUrls: setImageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 847,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                ref: audioRef,\n                src: audioUrl !== null && audioUrl !== void 0 ? audioUrl : undefined,\n                onEnded: handleSongEnd,\n                onTimeUpdate: ()=>{\n                    if (audioRef.current && !isSeeking && !isExternallySeeking) {\n                        const current = audioRef.current.currentTime;\n                        // Only update state if the difference is significant\n                        if (Math.abs(currentTime - current) > 0.25) {\n                            setCurrentTime(current);\n                        }\n                    }\n                },\n                onLoadedMetadata: handleLoadedMetadata,\n                onVolumeChange: ()=>{\n                    if (audioRef.current) {\n                        setVolume(audioRef.current.volume);\n                    }\n                },\n                style: {\n                    display: \"none\"\n                }\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 863,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/app/page.tsx\",\n        lineNumber: 736,\n        columnNumber: 7\n    }, this);\n}\n_s(MusicPlayerContent, \"k+PTovmQO4kwfjuJII0wb7gOBO0=\", false, function() {\n    return [\n        _hooks_useAuth__WEBPACK_IMPORTED_MODULE_12__.useAuth,\n        _hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_13__.useSupabaseData,\n        _hooks_useQueue__WEBPACK_IMPORTED_MODULE_14__.useQueue,\n        _components_ThemeContext__WEBPACK_IMPORTED_MODULE_15__.useTheme\n    ];\n});\n_c = MusicPlayerContent;\nfunction MusicPlayerApp() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AuthWrapper__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_hot_toast__WEBPACK_IMPORTED_MODULE_16__.Toaster, {\n                position: \"bottom-center\"\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 894,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MusicPlayerContent, {}, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 895,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/app/page.tsx\",\n        lineNumber: 893,\n        columnNumber: 5\n    }, this);\n}\n_c1 = MusicPlayerApp;\nvar _c, _c1;\n$RefreshReg$(_c, \"MusicPlayerContent\");\n$RefreshReg$(_c1, \"MusicPlayerApp\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTXJFO2dCQUNObEMsV0FBV0E7Z0JBQ1g2SyxpQkFBaUJySztnQkFDakJpSyxrQkFBa0I7b0JBQ2hCeEksMEJBQTBCO29CQUMxQkYsMkJBQTJCO2dCQUM3QjtnQkFDQWEsV0FBV0E7Z0JBQ1hDLGNBQWNBOzs7Ozs7MEJBRWhCLDhEQUFDK0M7Z0JBQ0N5RyxLQUFLcko7Z0JBQ0xzSixLQUFLeEoscUJBQUFBLHNCQUFBQSxXQUFZeUo7Z0JBQ2pCQyxTQUFTcEM7Z0JBQ1RxQyxjQUFjO29CQUNkLElBQUl6SixTQUFTMkMsT0FBTyxJQUFJLENBQUNwQyxhQUFhLENBQUNJLHFCQUFxQjt3QkFDMUQsTUFBTWdDLFVBQVUzQyxTQUFTMkMsT0FBTyxDQUFDMUMsV0FBVzt3QkFDNUMscURBQXFEO3dCQUNyRCxJQUFJeUosS0FBS0MsR0FBRyxDQUFDMUosY0FBYzBDLFdBQVcsTUFBTTs0QkFDMUN6QyxlQUFleUM7d0JBQ2pCO29CQUNGO2dCQUNGO2dCQUdFaUgsa0JBQWtCdEQ7Z0JBQ2xCdUQsZ0JBQWdCO29CQUNkLElBQUk3SixTQUFTMkMsT0FBTyxFQUFFO3dCQUNwQnJDLFVBQVVOLFNBQVMyQyxPQUFPLENBQUN0QyxNQUFNO29CQUNuQztnQkFDRjtnQkFDQXlKLE9BQU87b0JBQUVDLFNBQVM7Z0JBQU87Ozs7Ozs7Ozs7OztBQUtuQztHQWwyQlNsTjs7UUFDVU4sb0RBQU9BO1FBaUJwQkMsb0VBQWVBO1FBU2ZDLHNEQUFRQTtRQVl3QkMsK0RBQVFBOzs7S0F2Q3JDRztBQW8yQk0sU0FBU21OO0lBQ3RCLHFCQUNFLDhEQUFDMU4sZ0VBQVdBOzswQkFDViw4REFBQ0sscURBQU9BO2dCQUFDc04sVUFBUzs7Ozs7OzBCQUNsQiw4REFBQ3BOOzs7Ozs7Ozs7OztBQUdQO01BUHdCbU4iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL3BhZ2UudHN4Pzc2MDMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEhvbWUgYXMgSG9tZUljb24sIFNlYXJjaCwgU2V0dGluZ3MgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IEhvbWVQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9Ib21lUGFnZSc7XG5pbXBvcnQgU2VhcmNoUGFnZSBmcm9tICdAL2NvbXBvbmVudHMvU2VhcmNoUGFnZSc7XG5pbXBvcnQgU2V0dGluZ3NQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9TZXR0aW5nc1BhZ2UnO1xuaW1wb3J0IFBsYXlsaXN0c1BhZ2UgZnJvbSAnQC9jb21wb25lbnRzL1BsYXlsaXN0c1BhZ2UnO1xuaW1wb3J0IExpa2VkU29uZ3NQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9MaWtlZFNvbmdzUGFnZSc7XG5pbXBvcnQgTWluaW1pemVkUGxheWVyIGZyb20gJ0AvY29tcG9uZW50cy9NaW5pbWl6ZWRQbGF5ZXInO1xuaW1wb3J0IE1heGltaXplZFBsYXllciBmcm9tICdAL2NvbXBvbmVudHMvTWF4aW1pemVkUGxheWVyJztcbmltcG9ydCBDcmVhdGVQbGF5bGlzdE1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy9DcmVhdGVQbGF5bGlzdE1vZGFsJztcbmltcG9ydCBBZGRUb1BsYXlsaXN0TW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL0FkZFRvUGxheWxpc3RNb2RhbCc7XG5pbXBvcnQgQXV0aFdyYXBwZXIgZnJvbSAnQC9jb21wb25lbnRzL0F1dGhXcmFwcGVyJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2hvb2tzL3VzZUF1dGgnO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2VEYXRhIH0gZnJvbSAnQC9ob29rcy91c2VTdXBhYmFzZURhdGEnO1xuaW1wb3J0IHsgdXNlUXVldWUgfSBmcm9tICdAL2hvb2tzL3VzZVF1ZXVlJztcbmltcG9ydCB7IFNvbmcgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IHVzZVRoZW1lIH0gZnJvbSAnQC9jb21wb25lbnRzL1RoZW1lQ29udGV4dCc7XG5pbXBvcnQge1RvYXN0ZXIsdG9hc3R9IGZyb20gJ3JlYWN0LWhvdC10b2FzdCc7XG5cblxuZnVuY3Rpb24gTXVzaWNQbGF5ZXJDb250ZW50KCkge1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3Qge1xuICAgIHNvbmdzLFxuICAgIHBsYXlsaXN0cyxcbiAgICBsaWtlZFNvbmdzLFxuICAgIGxhc3RQbGF5ZWRTb25nLFxuICAgIGxvYWRpbmcsXG4gICAgdG9nZ2xlTGlrZSxcbiAgICBjcmVhdGVQbGF5bGlzdCxcbiAgICBkZWxldGVQbGF5bGlzdCxcbiAgICByZW5hbWVQbGF5bGlzdCxcbiAgICBhZGRTb25nVG9QbGF5bGlzdCxcbiAgICByZW1vdmVTb25nRnJvbVBsYXlsaXN0LFxuICAgIHJlY29yZExpc3RlbmluZ0hpc3RvcnksXG4gICAgc3RvcEN1cnJlbnRTb25nVHJhY2tpbmcsXG4gICAgZ2V0UGVyc29uYWxpemVkU29uZ3MsXG4gICAgZ2V0U21hcnRQZXJzb25hbGl6ZWRTb25nc1xuICB9ID0gdXNlU3VwYWJhc2VEYXRhKHVzZXIpO1xuICBcbiAgY29uc3Qge1xuICAgIHF1ZXVlLFxuICAgIGFkZFRvUXVldWUsXG4gICAgcmVtb3ZlRnJvbVF1ZXVlLFxuICAgIGdldE5leHRTb25nRnJvbVF1ZXVlLFxuICAgIGNsZWFyUXVldWUsXG4gICAgaGFzUXVldWVcbiAgfSA9IHVzZVF1ZXVlKCk7XG5cbiAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlPCdob21lJyB8ICdzZWFyY2gnIHwgJ3NldHRpbmdzJz4oJ2hvbWUnKTtcbiAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSB1c2VTdGF0ZTwnbWFpbicgfCAncGxheWxpc3RzJyB8ICdsaWtlZCc+KCdtYWluJyk7XG4gIGNvbnN0IFtjdXJyZW50U29uZywgc2V0Q3VycmVudFNvbmddID0gdXNlU3RhdGU8U29uZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNQbGF5ZXJNYXhpbWl6ZWQsIHNldElzUGxheWVyTWF4aW1pemVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dDcmVhdGVQbGF5bGlzdE1vZGFsLCBzZXRTaG93Q3JlYXRlUGxheWxpc3RNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93QWRkVG9QbGF5bGlzdE1vZGFsLCBzZXRTaG93QWRkVG9QbGF5bGlzdE1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkU29uZ0ZvclBsYXlsaXN0LCBzZXRTZWxlY3RlZFNvbmdGb3JQbGF5bGlzdF0gPSB1c2VTdGF0ZTxTb25nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtoYXNTZXRMYXN0UGxheWVkU29uZywgc2V0SGFzU2V0TGFzdFBsYXllZFNvbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGFzdFBsYXllZFNvbmdEaXNtaXNzZWQsIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgeyBpc0RhcmtNb2RlLCB0b2dnbGVUaGVtZSB9ID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgW2Rpc3BsYXlDb3VudCwgc2V0RGlzcGxheUNvdW50XSA9IHVzZVN0YXRlKDE1KTtcbiAgY29uc3QgW2ltYWdlVXJscywgc2V0SW1hZ2VVcmxzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHt9KTtcbiAgY29uc3QgW2F1ZGlvVXJsLCBzZXRBdWRpb1VybF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWY8SFRNTEF1ZGlvRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbZHVyYXRpb24sIHNldER1cmF0aW9uXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbdm9sdW1lLCBzZXRWb2x1bWVdID0gdXNlU3RhdGUoMC43NSk7IC8vIGRlZmF1bHQgNzUlXG4gIGNvbnN0IFtpc1NlZWtpbmcsIHNldElzU2Vla2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwZW5kaW5nU2Vla1RpbWUsIHNldFBlbmRpbmdTZWVrVGltZV0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzRXh0ZXJuYWxseVNlZWtpbmcsIHNldElzRXh0ZXJuYWxseVNlZWtpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVjb21tZW5kZWRRdWV1ZSwgc2V0UmVjb21tZW5kZWRRdWV1ZV0gPSB1c2VTdGF0ZTxTb25nW10+KFtdKVxuICBjb25zdCBbcGxheWVkU29uZ3MsIHNldFBsYXllZFNvbmdzXSA9IHVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpICBcbiAgY29uc3QgW3BlcnNvbmFsaXplZExpc3QsIHNldFBlcnNvbmFsaXplZExpc3RdID0gdXNlU3RhdGU8U29uZ1tdPihbXSk7XG4gIGNvbnN0IFtjdXJyZW50U29uZ0luZGV4LCBzZXRDdXJyZW50U29uZ0luZGV4XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IFtsaXN0ZW5lZFNvbmdzLCBzZXRMaXN0ZW5lZFNvbmdzXSA9IHVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xuICBjb25zdCBbaXNGZXRjaGluZ01vcmUsIHNldElzRmV0Y2hpbmdNb3JlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFNtYXJ0IHJlY29tbWVuZGF0aW9uIHN5c3RlbSBzdGF0ZVxuICBjb25zdCBbY3VycmVudEJhdGNoTGlzdGVuZWRTb25ncywgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25nc10gPSB1c2VTdGF0ZTxTb25nW10+KFtdKTtcbiAgY29uc3QgW3NvbmdTdGFydFRpbWUsIHNldFNvbmdTdGFydFRpbWVdID0gdXNlU3RhdGU8RGF0ZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYmF0Y2hTdGFydEluZGV4LCBzZXRCYXRjaFN0YXJ0SW5kZXhdID0gdXNlU3RhdGUoMCk7XG4gIFxuICAvLyBTaHVmZmxlIGFuZCByZXBlYXQgc3RhdGVcbiAgY29uc3QgW2lzU2h1ZmZsZUVuYWJsZWQsIHNldElzU2h1ZmZsZUVuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7IC8vIFNodWZmbGUgb24gYnkgZGVmYXVsdFxuICBjb25zdCBbcmVwZWF0TW9kZSwgc2V0UmVwZWF0TW9kZV0gPSB1c2VTdGF0ZTwnb2ZmJyB8ICdvbmNlJyB8ICdpbmZpbml0ZSc+KCdvZmYnKTtcblxuY29uc3QgbG9hZE1vcmVTb25ncyA9ICgpID0+IHtcbiAgc2V0RGlzcGxheUNvdW50KHByZXYgPT4gcHJldiArIDE1KTtcbn07XG5cbmNvbnN0IGRpc3BsYXllZFNvbmdzID0gc29uZ3Muc2xpY2UoMCwgZGlzcGxheUNvdW50KTtcbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGNvbnN0IGxvYWRBdWRpbyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoY3VycmVudFNvbmc/LmZpbGVfaWQpIHtcbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL2F1ZGlvLXByb3h5P2ZpbGVpZD0ke2N1cnJlbnRTb25nLmZpbGVfaWR9YDtcbiAgICAgIHNldEF1ZGlvVXJsKHVybCk7XG5cbiAgICAgIHNldER1cmF0aW9uKDApO1xuICAgICAgc2V0Q3VycmVudFRpbWUoMCk7XG4gICAgICBzZXRQZW5kaW5nU2Vla1RpbWUobnVsbCk7XG4gICAgfVxuICB9O1xuXG4gIGxvYWRBdWRpbygpO1xufSwgW2N1cnJlbnRTb25nPy5maWxlX2lkXSk7XG5cbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGlmIChhdWRpb1JlZi5jdXJyZW50KSB7XG4gICAgYXVkaW9SZWYuY3VycmVudC52b2x1bWUgPSB2b2x1bWU7XG4gIH1cbn0sIFt2b2x1bWVdKTtcblxudXNlRWZmZWN0KCgpID0+IHtcbiAgY29uc3QgYXVkaW8gPSBhdWRpb1JlZi5jdXJyZW50O1xuICBpZiAoIWF1ZGlvKSByZXR1cm47XG5cbiAgaWYgKCFpc05hTihhdWRpby5kdXJhdGlvbikgJiYgaXNQbGF5aW5nKSB7XG4gICAgLy8gRHVyYXRpb24gaXMgdmFsaWQsIHNhZmUgdG8gcGxheVxuICAgIGF1ZGlvLnBsYXkoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignUGxheWJhY2sgZXJyb3I6JywgZSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoIWlzUGxheWluZykge1xuICAgIGF1ZGlvLnBhdXNlKCk7XG4gIH1cbn0sIFtpc1BsYXlpbmddKTtcblxuXG5cblxuLy8gTG9hZCBpbWFnZXMgZm9yIGN1cnJlbnRseSBkaXNwbGF5ZWQgc29uZ3NcbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGNvbnN0IGZldGNoSW1hZ2VzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG5ld1VybHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgIC8vIFNvbmdzIGZyb20gdGhlIG1haW4gZmVlZFxuICAgIGNvbnN0IHNvbmdzVG9Mb2FkID0gc29uZ3Muc2xpY2UoMCwgZGlzcGxheUNvdW50KTtcbiAgICBmb3IgKGNvbnN0IHNvbmcgb2Ygc29uZ3NUb0xvYWQpIHtcbiAgICAgIGlmICghaW1hZ2VVcmxzW3NvbmcuaWRdKSB7XG4gICAgICAgIG5ld1VybHNbc29uZy5pZF0gPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtzb25nLmltZ19pZH1gO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvbmdzIGZyb20gcGxheWxpc3RzXG4gICAgZm9yIChjb25zdCBwbGF5bGlzdCBvZiBwbGF5bGlzdHMpIHtcbiAgICAgIGZvciAoY29uc3Qgc29uZyBvZiBwbGF5bGlzdC5zb25ncykge1xuICAgICAgICBpZiAoIWltYWdlVXJsc1tzb25nLmlkXSkge1xuICAgICAgICAgIG5ld1VybHNbc29uZy5pZF0gPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtzb25nLmltZ19pZH1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTGlrZWQgc29uZ3NcbiAgICBmb3IgKGNvbnN0IHNvbmcgb2YgbGlrZWRTb25ncykge1xuICAgICAgaWYgKCFpbWFnZVVybHNbc29uZy5pZF0pIHtcbiAgICAgICAgbmV3VXJsc1tzb25nLmlkXSA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke3NvbmcuaW1nX2lkfWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgaWYgbmV3IFVSTHMgZm91bmRcbiAgICBpZiAoT2JqZWN0LmtleXMobmV3VXJscykubGVuZ3RoID4gMCkge1xuICAgICAgc2V0SW1hZ2VVcmxzKHByZXYgPT4gKHsgLi4ucHJldiwgLi4ubmV3VXJscyB9KSk7XG4gICAgfVxuICB9O1xuXG4gIGZldGNoSW1hZ2VzKCk7XG59LCBbZGlzcGxheUNvdW50LCBzb25ncywgcGxheWxpc3RzLCBsaWtlZFNvbmdzXSk7XG5cblxudXNlRWZmZWN0KCgpID0+IHtcbiAgY29uc29sZS5sb2coJ/CfjrUgcGVyc29uYWxpemVkTGlzdCB1cGRhdGVkOicsIHBlcnNvbmFsaXplZExpc3QpO1xufSwgW3BlcnNvbmFsaXplZExpc3RdKTtcblxuICAvLyBTZXQgbGFzdCBwbGF5ZWQgc29uZyBhcyBjdXJyZW50IHNvbmcgd2hlbiBkYXRhIGxvYWRzIChvbmx5IG9uY2UgYW5kIGlmIG5vdCBkaXNtaXNzZWQpXG51c2VFZmZlY3QoKCkgPT4ge1xuICBjb25zdCBsb2FkTGFzdFBsYXllZEltYWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh1c2VyICYmIGxhc3RQbGF5ZWRTb25nICYmICFoYXNTZXRMYXN0UGxheWVkU29uZyAmJiAhbGFzdFBsYXllZFNvbmdEaXNtaXNzZWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn461IExvYWRpbmcgaW5pdGlhbCBwZXJzb25hbGl6ZWQgc29uZ3MgZm9yIGxhc3QgcGxheWVkIHNvbmcnKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbFJlY3MgPSBhd2FpdCBnZXRQZXJzb25hbGl6ZWRTb25ncyh1c2VyLmlkLCBsYXN0UGxheWVkU29uZywgbGlzdGVuZWRTb25ncyk7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0gaW5pdGlhbFJlY3MuZmlsdGVyKHNvbmcgPT4gIXBsYXllZFNvbmdzLmhhcyhzb25nLmZpbGVfaWQudG9TdHJpbmcoKSkpO1xuICAgICAgICBjb25zdCBuZXdQZXJzb25hbGl6ZWRMaXN0ID0gW2xhc3RQbGF5ZWRTb25nLCAuLi5maWx0ZXJlZC5zbGljZSgwLCA0KV07XG4gICAgICAgIHNldFBlcnNvbmFsaXplZExpc3QobmV3UGVyc29uYWxpemVkTGlzdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgSW5pdGlhbCBwZXJzb25hbGl6ZWQgbGlzdCBzZXQ6JywgbmV3UGVyc29uYWxpemVkTGlzdC5sZW5ndGgsICdzb25ncycpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGxvYWRpbmcgaW5pdGlhbCBwZXJzb25hbGl6ZWQgc29uZ3M6JywgZXJyb3IpO1xuICAgICAgICBzZXRQZXJzb25hbGl6ZWRMaXN0KFtsYXN0UGxheWVkU29uZ10pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzZXRDdXJyZW50U29uZyhsYXN0UGxheWVkU29uZyk7XG4gICAgICBzZXRIYXNTZXRMYXN0UGxheWVkU29uZyh0cnVlKTtcblxuICAgICAgLy8gQWRkIHRvIGxpc3RlbmVkIHNvbmdzIGFuZCBsb2dcbiAgICAgIHNldExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICAgIG5ld1NldC5hZGQobGFzdFBsYXllZFNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgTGlzdGVuZWQgU29uZ3MgTGlzdDonLCBBcnJheS5mcm9tKG5ld1NldCkpO1xuICAgICAgICByZXR1cm4gbmV3U2V0O1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghaW1hZ2VVcmxzW2xhc3RQbGF5ZWRTb25nLmltZ19pZF0pIHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7bGFzdFBsYXllZFNvbmcuaW1nX2lkfWA7XG4gICAgICAgIHNldEltYWdlVXJscygocHJldikgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIFtsYXN0UGxheWVkU29uZy5pbWdfaWRdOiB1cmxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBsb2FkTGFzdFBsYXllZEltYWdlKCk7XG59LCBbbGFzdFBsYXllZFNvbmcsIGhhc1NldExhc3RQbGF5ZWRTb25nLCBsYXN0UGxheWVkU29uZ0Rpc21pc3NlZCwgdXNlciwgZ2V0UGVyc29uYWxpemVkU29uZ3NdKTtcblxuXG5jb25zdCBoYW5kbGVTb25nUGxheSA9IGFzeW5jIChzb25nOiBTb25nKSA9PiB7XG4gIC8vIFJlY29yZCBpZiBwcmV2aW91cyBzb25nIHdhcyBsaXN0ZW5lZCB0byAoPjIwIHNlY29uZHMpXG4gIGlmIChjdXJyZW50U29uZyAmJiBzb25nU3RhcnRUaW1lKSB7XG4gICAgY29uc3QgbGlzdGVuRHVyYXRpb24gPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzb25nU3RhcnRUaW1lLmdldFRpbWUoKSkgLyAxMDAwO1xuICAgIGlmIChsaXN0ZW5EdXJhdGlvbiA+IDIwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFVzZXIgbGlzdGVuZWQgdG8gXCIke2N1cnJlbnRTb25nLm5hbWV9XCIgZm9yICR7bGlzdGVuRHVyYXRpb24udG9GaXhlZCgxKX0gc2Vjb25kc2ApO1xuICAgICAgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25ncyhwcmV2ID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldi5zb21lKHMgPT4gcy5maWxlX2lkID09PSBjdXJyZW50U29uZy5maWxlX2lkKTtcbiAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXYsIGN1cnJlbnRTb25nXTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+OtSBDdXJyZW50IGJhdGNoIGxpc3RlbmVkIHNvbmdzOicsIHVwZGF0ZWQubWFwKHMgPT4gcy5uYW1lKSk7XG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYOKPre+4jyBVc2VyIHNraXBwZWQgXCIke2N1cnJlbnRTb25nLm5hbWV9XCIgYWZ0ZXIgJHtsaXN0ZW5EdXJhdGlvbi50b0ZpeGVkKDEpfSBzZWNvbmRzYCk7XG4gICAgfVxuICB9XG5cbiAgc2V0Q3VycmVudFNvbmcoc29uZyk7XG4gIHNldElzUGxheWluZyh0cnVlKTtcbiAgc2V0TGFzdFBsYXllZFNvbmdEaXNtaXNzZWQoZmFsc2UpO1xuICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5KHNvbmcuaWQpO1xuICBzZXRTb25nU3RhcnRUaW1lKG5ldyBEYXRlKCkpOyAvLyBUcmFjayB3aGVuIHRoaXMgc29uZyBzdGFydGVkXG5cbiAgLy8gQWRkIHRvIGxpc3RlbmVkIHNvbmdzIGFuZCBsb2dcbiAgc2V0TGlzdGVuZWRTb25ncyhwcmV2ID0+IHtcbiAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgIG5ld1NldC5hZGQoc29uZy5maWxlX2lkLnRvU3RyaW5nKCkpO1xuICAgIGNvbnNvbGUubG9nKCfwn461IExpc3RlbmVkIFNvbmdzIExpc3Q6JywgQXJyYXkuZnJvbShuZXdTZXQpKTtcbiAgICByZXR1cm4gbmV3U2V0O1xuICB9KTtcblxuICBzZXRQbGF5ZWRTb25ncygocHJldikgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgU2V0KHByZXYpO1xuICAgIHVwZGF0ZWQuYWRkKHNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfSk7XG5cbiAgaWYgKHVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfjrUgRmV0Y2hpbmcgcGVyc29uYWxpemVkIHNvbmdzIGZvcjonLCBzb25nLm5hbWUpO1xuICAgICAgY29uc3QgcmVjcyA9IGF3YWl0IGdldFBlcnNvbmFsaXplZFNvbmdzKHVzZXIuaWQsIHNvbmcsIGxpc3RlbmVkU29uZ3MpO1xuICAgICAgY29uc3QgZmlsdGVyZWQgPSByZWNzLmZpbHRlcihzID0+ICFwbGF5ZWRTb25ncy5oYXMocy5maWxlX2lkLnRvU3RyaW5nKCkpKTtcbiAgICAgIGNvbnN0IG5ld1BlcnNvbmFsaXplZExpc3QgPSBbc29uZywgLi4uZmlsdGVyZWQuc2xpY2UoMCwgNCldO1xuICAgICAgc2V0UGVyc29uYWxpemVkTGlzdChuZXdQZXJzb25hbGl6ZWRMaXN0KTtcbiAgICAgIHNldEN1cnJlbnRTb25nSW5kZXgoMCk7XG4gICAgICBzZXRCYXRjaFN0YXJ0SW5kZXgoMCk7XG4gICAgICBzZXRDdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzKFtdKTsgLy8gUmVzZXQgYmF0Y2ggZm9yIG5ldyBzb25nIHNlbGVjdGlvblxuICAgICAgY29uc29sZS5sb2coJ+KchSBOZXcgcGVyc29uYWxpemVkIGxpc3Qgc2V0OicsIG5ld1BlcnNvbmFsaXplZExpc3QubGVuZ3RoLCAnc29uZ3MnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIHBlcnNvbmFsaXplZCBzb25nczonLCBlcnJvcik7XG4gICAgICBzZXRQZXJzb25hbGl6ZWRMaXN0KFtzb25nXSk7XG4gICAgICBzZXRDdXJyZW50U29uZ0luZGV4KDApO1xuICAgICAgc2V0QmF0Y2hTdGFydEluZGV4KDApO1xuICAgICAgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25ncyhbXSk7XG4gICAgfVxuICB9XG59O1xuXG5cbiAgY29uc3QgaGFuZGxlQWRkVG9RdWV1ZSA9IChzb25nOiBTb25nKSA9PiB7XG4gIGFkZFRvUXVldWUoc29uZyk7XG4gIHRvYXN0LnN1Y2Nlc3MoYEFkZGVkIFwiJHtzb25nLm5hbWV9XCIgdG8gcXVldWVgKTtcbn07XG5cbiAgY29uc3QgdG9nZ2xlUGxheSA9ICgpID0+IHtcbiAgICBzZXRJc1BsYXlpbmcoIWlzUGxheWluZyk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlUGxheWVyU2l6ZSA9ICgpID0+IHtcbiAgICBzZXRJc1BsYXllck1heGltaXplZCghaXNQbGF5ZXJNYXhpbWl6ZWQpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlUGxheWVyID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIFN0b3AgdHJhY2tpbmcgY3VycmVudCBzb25nIGJlZm9yZSBjbG9zaW5nXG4gICAgYXdhaXQgc3RvcEN1cnJlbnRTb25nVHJhY2tpbmcoKTtcbiAgICBzZXRDdXJyZW50U29uZyhudWxsKTtcbiAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICAgIHNldElzUGxheWVyTWF4aW1pemVkKGZhbHNlKTtcbiAgICBcbiAgICAvLyBNYXJrIGxhc3QgcGxheWVkIHNvbmcgYXMgZGlzbWlzc2VkIHNvIGl0IHdvbid0IGF1dG8tbG9hZCBhZ2FpblxuICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZUxpa2UgPSAoc29uZ0lkOiBzdHJpbmcpID0+IHtcbiAgICB0b2dnbGVMaWtlKHNvbmdJZCk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgc29uZyBzdGF0ZSBpZiBpdCdzIHRoZSBvbmUgYmVpbmcgbGlrZWQvdW5saWtlZFxuICAgIGlmIChjdXJyZW50U29uZyAmJiBjdXJyZW50U29uZy5pZCA9PT0gc29uZ0lkKSB7XG4gICAgICBzZXRDdXJyZW50U29uZyhwcmV2ID0+IHByZXYgPyB7IC4uLnByZXYsIGlzTGlrZWQ6ICFwcmV2LmlzTGlrZWQgfSA6IG51bGwpO1xuICAgIH1cbiAgfTtcblxuY29uc3QgaGFuZGxlUHJldmlvdXMgPSAoKSA9PiB7XG4gIC8vIFJlY29yZCBpZiBjdXJyZW50IHNvbmcgd2FzIGxpc3RlbmVkIHRvIGJlZm9yZSBnb2luZyB0byBwcmV2aW91c1xuICBpZiAoY3VycmVudFNvbmcgJiYgc29uZ1N0YXJ0VGltZSkge1xuICAgIGNvbnN0IGxpc3RlbkR1cmF0aW9uID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc29uZ1N0YXJ0VGltZS5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICBpZiAobGlzdGVuRHVyYXRpb24gPiAyMCkge1xuICAgICAgY29uc29sZS5sb2coYOKchSBVc2VyIGxpc3RlbmVkIHRvIFwiJHtjdXJyZW50U29uZy5uYW1lfVwiIGZvciAke2xpc3RlbkR1cmF0aW9uLnRvRml4ZWQoMSl9IHNlY29uZHNgKTtcbiAgICAgIHNldEN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZShzID0+IHMuZmlsZV9pZCA9PT0gY3VycmVudFNvbmcuZmlsZV9pZCk7XG4gICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2LCBjdXJyZW50U29uZ107XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgQ3VycmVudCBiYXRjaCBsaXN0ZW5lZCBzb25nczonLCB1cGRhdGVkLm1hcChzID0+IHMubmFtZSkpO1xuICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjdXJyZW50U29uZykgcmV0dXJuO1xuXG4gIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBwcmV2aW91cyBzb25nIGluIHRoZSBwZXJzb25hbGl6ZWQgbGlzdFxuICBpZiAoY3VycmVudFNvbmdJbmRleCA+IDApIHtcbiAgICBjb25zdCBwcmV2SW5kZXggPSBjdXJyZW50U29uZ0luZGV4IC0gMTtcbiAgICBjb25zdCBwcmV2U29uZyA9IHBlcnNvbmFsaXplZExpc3RbcHJldkluZGV4XTtcbiAgICBcbiAgICBpZiAocHJldlNvbmcpIHtcbiAgICAgIHNldEN1cnJlbnRTb25nKHByZXZTb25nKTtcbiAgICAgIHNldEN1cnJlbnRTb25nSW5kZXgocHJldkluZGV4KTtcbiAgICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgICAgIHJlY29yZExpc3RlbmluZ0hpc3RvcnkocHJldlNvbmcuaWQpO1xuICAgICAgc2V0U29uZ1N0YXJ0VGltZShuZXcgRGF0ZSgpKTtcblxuICAgICAgLy8gQWRkIHRvIGxpc3RlbmVkIHNvbmdzIGFuZCBsb2dcbiAgICAgIHNldExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICAgIG5ld1NldC5hZGQocHJldlNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgTGlzdGVuZWQgU29uZ3MgTGlzdDonLCBBcnJheS5mcm9tKG5ld1NldCkpO1xuICAgICAgICByZXR1cm4gbmV3U2V0O1xuICAgICAgfSk7XG5cbiAgICAgIHNldFBsYXllZFNvbmdzKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICB1cGRhdGVkLmFkZChwcmV2U29uZy5maWxlX2lkLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmVsb2FkIGltYWdlXG4gICAgICBpZiAoIWltYWdlVXJsc1twcmV2U29uZy5pbWdfaWRdKSB7XG4gICAgICAgIGNvbnN0IG5ld1VybCA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke3ByZXZTb25nLmltZ19pZH1gO1xuICAgICAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbcHJldlNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgYXQgdGhlIGJlZ2lubmluZywganVzdCByZXN0YXJ0IGN1cnJlbnQgc29uZ1xuICAgIHNldEN1cnJlbnRUaW1lKDApO1xuICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgfVxufTtcblxudXNlRWZmZWN0KCgpID0+IHtcbiAgaWYgKCFjdXJyZW50U29uZykgcmV0dXJuO1xuXG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvbmdzLmZpbmRJbmRleChzb25nID0+IHNvbmcuaWQgPT09IGN1cnJlbnRTb25nLmlkKTtcbiAgY29uc3QgbmV4dEluZGV4ID0gY3VycmVudEluZGV4IDwgc29uZ3MubGVuZ3RoIC0gMSA/IGN1cnJlbnRJbmRleCArIDEgOiAwO1xuICBjb25zdCBuZXh0U29uZyA9IHNvbmdzW25leHRJbmRleF07XG5cbiAgLy8gUHJlbG9hZCBuZXh0IHNvbmcgaW1hZ2UgaWYgbm90IGluIGNhY2hlXG4gIGlmIChuZXh0U29uZyAmJiAhaW1hZ2VVcmxzW25leHRTb25nLmltZ19pZF0pIHtcbiAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0U29uZy5pbWdfaWR9YDtcbiAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbbmV4dFNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgfVxufSwgW2N1cnJlbnRTb25nLCBzb25nc10pO1xuXG5jb25zdCBoYW5kbGVMb2FkZWRNZXRhZGF0YSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgYXVkaW8gPSBhdWRpb1JlZi5jdXJyZW50O1xuICBpZiAoIWF1ZGlvKSByZXR1cm47XG5cbiAgY29uc3QgbG9hZGVkRHVyYXRpb24gPSBhdWRpby5kdXJhdGlvbjtcblxuICBpZiAoIWlzTmFOKGxvYWRlZER1cmF0aW9uKSAmJiBpc0Zpbml0ZShsb2FkZWREdXJhdGlvbikpIHtcbiAgICBzZXREdXJhdGlvbihsb2FkZWREdXJhdGlvbik7XG5cbiAgICBpZiAocGVuZGluZ1NlZWtUaW1lICE9PSBudWxsKSB7XG4gICAgICBhdWRpby5jdXJyZW50VGltZSA9IHBlbmRpbmdTZWVrVGltZTtcbiAgICAgIHNldEN1cnJlbnRUaW1lKHBlbmRpbmdTZWVrVGltZSk7XG4gICAgICBzZXRQZW5kaW5nU2Vla1RpbWUobnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEN1cnJlbnRUaW1lKGF1ZGlvLmN1cnJlbnRUaW1lKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGlzUGxheWluZykge1xuICAgICAgICBhd2FpdCBhdWRpby5wbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRvLXBsYXkgZXJyb3IgYWZ0ZXIgbWV0YWRhdGEgbG9hZDonLCBlcnIpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIC8vIFJldHJ5IG1ldGFkYXRhIHJlYWRcbiAgICBzZXRUaW1lb3V0KGhhbmRsZUxvYWRlZE1ldGFkYXRhLCAxMDApO1xuICB9XG59O1xuXG5cblxuY29uc3QgaGFuZGxlTmV4dCA9IGFzeW5jICgpID0+IHtcbiAgLy8gUmVjb3JkIGlmIGN1cnJlbnQgc29uZyB3YXMgbGlzdGVuZWQgdG8gYmVmb3JlIGdvaW5nIHRvIG5leHRcbiAgaWYgKGN1cnJlbnRTb25nICYmIHNvbmdTdGFydFRpbWUpIHtcbiAgICBjb25zdCBsaXN0ZW5EdXJhdGlvbiA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHNvbmdTdGFydFRpbWUuZ2V0VGltZSgpKSAvIDEwMDA7XG4gICAgaWYgKGxpc3RlbkR1cmF0aW9uID4gMjApIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgVXNlciBsaXN0ZW5lZCB0byBcIiR7Y3VycmVudFNvbmcubmFtZX1cIiBmb3IgJHtsaXN0ZW5EdXJhdGlvbi50b0ZpeGVkKDEpfSBzZWNvbmRzYCk7XG4gICAgICBzZXRDdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2LnNvbWUocyA9PiBzLmZpbGVfaWQgPT09IGN1cnJlbnRTb25nLmZpbGVfaWQpO1xuICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldiwgY3VycmVudFNvbmddO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn461IEN1cnJlbnQgYmF0Y2ggbGlzdGVuZWQgc29uZ3M6JywgdXBkYXRlZC5tYXAocyA9PiBzLm5hbWUpKTtcbiAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhg4o+t77iPIFVzZXIgc2tpcHBlZCBcIiR7Y3VycmVudFNvbmcubmFtZX1cIiBhZnRlciAke2xpc3RlbkR1cmF0aW9uLnRvRml4ZWQoMSl9IHNlY29uZHNgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWN1cnJlbnRTb25nKSByZXR1cm47XG5cbiAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHNvbmcgaW4gdGhlIHF1ZXVlIGZpcnN0XG4gIGNvbnN0IG5leHRRdWV1ZVNvbmcgPSBnZXROZXh0U29uZ0Zyb21RdWV1ZSgpO1xuICBpZiAobmV4dFF1ZXVlU29uZykge1xuICAgIHNldEN1cnJlbnRTb25nKG5leHRRdWV1ZVNvbmcpO1xuICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgICBzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZChmYWxzZSk7XG4gICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShuZXh0UXVldWVTb25nLmlkKTtcbiAgICBzZXRTb25nU3RhcnRUaW1lKG5ldyBEYXRlKCkpO1xuICAgIFxuICAgIC8vIEFkZCB0byBsaXN0ZW5lZCBzb25ncyBhbmQgbG9nXG4gICAgc2V0TGlzdGVuZWRTb25ncyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICBuZXdTZXQuYWRkKG5leHRRdWV1ZVNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn461IExpc3RlbmVkIFNvbmdzIExpc3Q6JywgQXJyYXkuZnJvbShuZXdTZXQpKTtcbiAgICAgIHJldHVybiBuZXdTZXQ7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gVXBkYXRlIHBlcnNvbmFsaXplZCBsaXN0IHdpdGggdGhlIHF1ZXVlIHNvbmdcbiAgICBpZiAodXNlcikge1xuICAgICAgY29uc3QgcmVjcyA9IGF3YWl0IGdldFBlcnNvbmFsaXplZFNvbmdzKHVzZXIuaWQsIG5leHRRdWV1ZVNvbmcsIGxpc3RlbmVkU29uZ3MpO1xuICAgICAgY29uc3QgZmlsdGVyZWQgPSByZWNzLmZpbHRlcihzID0+ICFwbGF5ZWRTb25ncy5oYXMocy5maWxlX2lkKSk7XG4gICAgICBjb25zdCBuZXdQZXJzb25hbGl6ZWRMaXN0ID0gW25leHRRdWV1ZVNvbmcsIC4uLmZpbHRlcmVkLnNsaWNlKDAsIDQpXTtcbiAgICAgIHNldFBlcnNvbmFsaXplZExpc3QobmV3UGVyc29uYWxpemVkTGlzdCk7XG4gICAgICBzZXRDdXJyZW50U29uZ0luZGV4KDApO1xuICAgIH1cbiAgICBcbiAgICAvLyBQcmVsb2FkIGltYWdlXG4gICAgaWYgKCFpbWFnZVVybHNbbmV4dFF1ZXVlU29uZy5pbWdfaWRdKSB7XG4gICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0UXVldWVTb25nLmltZ19pZH1gO1xuICAgICAgc2V0SW1hZ2VVcmxzKHByZXYgPT4gKHsgLi4ucHJldiwgW25leHRRdWV1ZVNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgd2UncmUgYXQgdGhlIHNlY29uZC10by1sYXN0IHNvbmcgYW5kIG5lZWQgdG8gZmV0Y2ggc21hcnQgcmVjb21tZW5kYXRpb25zXG4gIGlmIChjdXJyZW50U29uZ0luZGV4ID09PSBwZXJzb25hbGl6ZWRMaXN0Lmxlbmd0aCAtIDIgJiYgIWlzRmV0Y2hpbmdNb3JlICYmIHVzZXIgJiYgY3VycmVudFNvbmcpIHtcbiAgICBjb25zb2xlLmxvZygn8J+noCBBdCBzZWNvbmQtdG8tbGFzdCBzb25nLCBjaGVja2luZyBmb3Igc21hcnQgcmVjb21tZW5kYXRpb25zLi4uJyk7XG4gICAgc2V0SXNGZXRjaGluZ01vcmUodHJ1ZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxldCBuZXdSZWNzOiBTb25nW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gSWYgd2UgaGF2ZSBzb25ncyB0aGF0IHVzZXIgYWN0dWFsbHkgbGlzdGVuZWQgdG8gaW4gY3VycmVudCBiYXRjaCwgdXNlIHNtYXJ0IHJlY29tbWVuZGF0aW9uc1xuICAgICAgaWYgKGN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+noCBVc2luZyBzbWFydCByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gbGlzdGVuZWQgc29uZ3MnKTtcbiAgICAgICAgbmV3UmVjcyA9IGF3YWl0IGdldFNtYXJ0UGVyc29uYWxpemVkU29uZ3MoXG4gICAgICAgICAgdXNlci5pZCwgXG4gICAgICAgICAgY3VycmVudEJhdGNoTGlzdGVuZWRTb25ncywgXG4gICAgICAgICAgbmV3IFNldChbLi4uQXJyYXkuZnJvbShsaXN0ZW5lZFNvbmdzKSwgLi4ucGVyc29uYWxpemVkTGlzdC5tYXAocyA9PiBzLmZpbGVfaWQudG9TdHJpbmcoKSldKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgTm8gbGlzdGVuZWQgc29uZ3MgaW4gYmF0Y2gsIHVzaW5nIHJlZ3VsYXIgcmVjb21tZW5kYXRpb25zJyk7XG4gICAgICAgIG5ld1JlY3MgPSBhd2FpdCBnZXRQZXJzb25hbGl6ZWRTb25ncyh1c2VyLmlkLCBjdXJyZW50U29uZywgbGlzdGVuZWRTb25ncyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gbmV3UmVjcy5maWx0ZXIoc29uZyA9PiBcbiAgICAgICAgIXBsYXllZFNvbmdzLmhhcyhzb25nLmZpbGVfaWQudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgIWxpc3RlbmVkU29uZ3MuaGFzKHNvbmcuZmlsZV9pZC50b1N0cmluZygpKSAmJlxuICAgICAgICAhcGVyc29uYWxpemVkTGlzdC5zb21lKGV4aXN0aW5nID0+IGV4aXN0aW5nLmZpbGVfaWQgPT09IHNvbmcuZmlsZV9pZClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNldFBlcnNvbmFsaXplZExpc3QocHJldiA9PiBbLi4ucHJldiwgLi4uZmlsdGVyZWQuc2xpY2UoMCwgNSldKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBBZGRlZCcsIGZpbHRlcmVkLnNsaWNlKDAsIDUpLmxlbmd0aCwgJ3NtYXJ0IHJlY29tbWVuZGF0aW9ucyB0byBwZXJzb25hbGl6ZWQgbGlzdCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZmV0Y2hpbmcgc21hcnQgcmVjb21tZW5kYXRpb25zOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNGZXRjaGluZ01vcmUoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIG5vIHF1ZXVlLCBwcm9jZWVkIHdpdGggcGVyc29uYWxpemVkIGxpc3RcbiAgY29uc3QgbmV4dEluZGV4ID0gY3VycmVudFNvbmdJbmRleCArIDE7XG5cbiAgaWYgKG5leHRJbmRleCA8IHBlcnNvbmFsaXplZExpc3QubGVuZ3RoKSB7XG4gICAgY29uc3QgbmV4dFNvbmcgPSBwZXJzb25hbGl6ZWRMaXN0W25leHRJbmRleF07XG4gICAgc2V0Q3VycmVudFNvbmcobmV4dFNvbmcpO1xuICAgIHNldEN1cnJlbnRTb25nSW5kZXgobmV4dEluZGV4KTtcbiAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgc2V0TGFzdFBsYXllZFNvbmdEaXNtaXNzZWQoZmFsc2UpO1xuICAgIHJlY29yZExpc3RlbmluZ0hpc3RvcnkobmV4dFNvbmcuaWQpO1xuICAgIHNldFNvbmdTdGFydFRpbWUobmV3IERhdGUoKSk7XG5cbiAgICAvLyBBZGQgdG8gbGlzdGVuZWQgc29uZ3MgYW5kIGxvZ1xuICAgIHNldExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgbmV3U2V0LmFkZChuZXh0U29uZy5maWxlX2lkLnRvU3RyaW5nKCkpO1xuICAgICAgY29uc29sZS5sb2coJ/CfjrUgTGlzdGVuZWQgU29uZ3MgTGlzdDonLCBBcnJheS5mcm9tKG5ld1NldCkpO1xuICAgICAgcmV0dXJuIG5ld1NldDtcbiAgICB9KTtcblxuICAgIHNldFBsYXllZFNvbmdzKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkID0gbmV3IFNldChwcmV2KTtcbiAgICAgIHVwZGF0ZWQuYWRkKFN0cmluZyhuZXh0U29uZy5maWxlX2lkKSk7XG4gICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICB9KTtcblxuICAgIC8vIFByZWxvYWQgaW1hZ2VcbiAgICBpZiAoIWltYWdlVXJsc1tuZXh0U29uZy5pbWdfaWRdKSB7XG4gICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0U29uZy5pbWdfaWR9YDtcbiAgICAgIHNldEltYWdlVXJscyhwcmV2ID0+ICh7IC4uLnByZXYsIFtuZXh0U29uZy5pbWdfaWRdOiBuZXdVcmwgfSkpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiBwZXJzb25hbGl6ZWQgbGlzdCwgZ2V0IG5ldyBzbWFydCByZWNvbW1lbmRhdGlvbnNcbiAgICBpZiAodXNlciAmJiBjdXJyZW50U29uZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfp6AgUmVhY2hlZCBlbmQgb2YgbGlzdCwgZmV0Y2hpbmcgbmV3IHNtYXJ0IHJlY29tbWVuZGF0aW9ucycpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG5ld1JlY3M6IFNvbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHNtYXJ0IHJlY29tbWVuZGF0aW9ucyBpZiB3ZSBoYXZlIGxpc3RlbmVkIHNvbmdzIGluIGN1cnJlbnQgYmF0Y2hcbiAgICAgICAgaWYgKGN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn6egIFVzaW5nIHNtYXJ0IHJlY29tbWVuZGF0aW9ucyBmb3IgbmV3IGJhdGNoJyk7XG4gICAgICAgICAgbmV3UmVjcyA9IGF3YWl0IGdldFNtYXJ0UGVyc29uYWxpemVkU29uZ3MoXG4gICAgICAgICAgICB1c2VyLmlkLCBcbiAgICAgICAgICAgIGN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MsIFxuICAgICAgICAgICAgbGlzdGVuZWRTb25nc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgVXNpbmcgcmVndWxhciByZWNvbW1lbmRhdGlvbnMgZm9yIG5ldyBiYXRjaCcpO1xuICAgICAgICAgIG5ld1JlY3MgPSBhd2FpdCBnZXRQZXJzb25hbGl6ZWRTb25ncyh1c2VyLmlkLCBjdXJyZW50U29uZywgbGlzdGVuZWRTb25ncyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0gbmV3UmVjcy5maWx0ZXIoc29uZyA9PiBcbiAgICAgICAgICAhcGxheWVkU29uZ3MuaGFzKHNvbmcuZmlsZV9pZC50b1N0cmluZygpKSAmJlxuICAgICAgICAgICFsaXN0ZW5lZFNvbmdzLmhhcyhzb25nLmZpbGVfaWQudG9TdHJpbmcoKSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFNvbmcgPSBmaWx0ZXJlZFswXTtcbiAgICAgICAgICBzZXRDdXJyZW50U29uZyhuZXh0U29uZyk7XG4gICAgICAgICAgc2V0SXNQbGF5aW5nKHRydWUpO1xuICAgICAgICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgICAgICAgICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5KG5leHRTb25nLmlkKTtcbiAgICAgICAgICBzZXRTb25nU3RhcnRUaW1lKG5ldyBEYXRlKCkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCB0byBsaXN0ZW5lZCBzb25ncyBhbmQgbG9nXG4gICAgICAgICAgc2V0TGlzdGVuZWRTb25ncyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICAgICAgICBuZXdTZXQuYWRkKG5leHRTb25nLmZpbGVfaWQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+OtSBMaXN0ZW5lZCBTb25ncyBMaXN0OicsIEFycmF5LmZyb20obmV3U2V0KSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3U2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBuZXcgcGVyc29uYWxpemVkIGxpc3Qgc3RhcnRpbmcgd2l0aCB0aGlzIHNvbmdcbiAgICAgICAgICBjb25zdCBuZXdQZXJzb25hbGl6ZWRMaXN0ID0gW25leHRTb25nLCAuLi5maWx0ZXJlZC5zbGljZSgxLCA1KV07XG4gICAgICAgICAgc2V0UGVyc29uYWxpemVkTGlzdChuZXdQZXJzb25hbGl6ZWRMaXN0KTtcbiAgICAgICAgICBzZXRDdXJyZW50U29uZ0luZGV4KDApO1xuICAgICAgICAgIHNldEJhdGNoU3RhcnRJbmRleCgwKTtcbiAgICAgICAgICBzZXRDdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzKFtdKTsgLy8gUmVzZXQgYmF0Y2ggZm9yIG5ldyByZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRQbGF5ZWRTb25ncygocHJldikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBTZXQocHJldik7XG4gICAgICAgICAgICB1cGRhdGVkLmFkZChuZXh0U29uZy5maWxlX2lkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJlbG9hZCBpbWFnZVxuICAgICAgICAgIGlmICghaW1hZ2VVcmxzW25leHRTb25nLmltZ19pZF0pIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1VybCA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke25leHRTb25nLmltZ19pZH1gO1xuICAgICAgICAgICAgc2V0SW1hZ2VVcmxzKHByZXYgPT4gKHsgLi4ucHJldiwgW25leHRTb25nLmltZ19pZF06IG5ld1VybCB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgTmV3IHNtYXJ0IHJlY29tbWVuZGF0aW9ucyBsb2FkZWQ6JywgbmV3UGVyc29uYWxpemVkTGlzdC5sZW5ndGgsICdzb25ncycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIE5vIG1vcmUgc21hcnQgcmVjb21tZW5kYXRpb25zIGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZmV0Y2hpbmcgbmV3IHNtYXJ0IHJlY29tbWVuZGF0aW9uczonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5cblxuXG4gIGNvbnN0IGZvcm1hdE51bWJlciA9IChudW06IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgaWYgKG51bSA+PSAxMDAwMDAwKSB7XG4gICAgICByZXR1cm4gKG51bSAvIDEwMDAwMDApLnRvRml4ZWQoMSkgKyAnTSc7XG4gICAgfSBlbHNlIGlmIChudW0gPj0gMTAwMCkge1xuICAgICAgcmV0dXJuIChudW0gLyAxMDAwKS50b0ZpeGVkKDEpICsgJ0snO1xuICAgIH1cbiAgICByZXR1cm4gbnVtLnRvU3RyaW5nKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQWRkVG9QbGF5bGlzdCA9IChzb25nOiBTb25nKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRTb25nRm9yUGxheWxpc3Qoc29uZyk7XG4gICAgc2V0U2hvd0FkZFRvUGxheWxpc3RNb2RhbCh0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTb25nRW5kID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIFJlY29yZCBpZiBzb25nIHdhcyBsaXN0ZW5lZCB0byBjb21wbGV0ZWx5IChhc3N1bWUgPjIwIHNlY29uZHMgaWYgaXQgZW5kZWQgbmF0dXJhbGx5KVxuICAgIGlmIChjdXJyZW50U29uZyAmJiBzb25nU3RhcnRUaW1lKSB7XG4gICAgICBjb25zdCBsaXN0ZW5EdXJhdGlvbiA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHNvbmdTdGFydFRpbWUuZ2V0VGltZSgpKSAvIDEwMDA7XG4gICAgICBjb25zb2xlLmxvZyhg8J+OtSBTb25nIFwiJHtjdXJyZW50U29uZy5uYW1lfVwiIGVuZGVkIGFmdGVyICR7bGlzdGVuRHVyYXRpb24udG9GaXhlZCgxKX0gc2Vjb25kc2ApO1xuICAgICAgXG4gICAgICBpZiAobGlzdGVuRHVyYXRpb24gPiAyMCkge1xuICAgICAgICBzZXRDdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzKHByZXYgPT4ge1xuICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZShzID0+IHMuZmlsZV9pZCA9PT0gY3VycmVudFNvbmcuZmlsZV9pZCk7XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldiwgY3VycmVudFNvbmddO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgQ3VycmVudCBiYXRjaCBsaXN0ZW5lZCBzb25nczonLCB1cGRhdGVkLm1hcChzID0+IHMubmFtZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSGFuZGxlIHJlcGVhdCBtb2Rlc1xuICAgIGlmIChyZXBlYXRNb2RlID09PSAnb25jZScgfHwgcmVwZWF0TW9kZSA9PT0gJ2luZmluaXRlJykge1xuICAgICAgLy8gUmVzdGFydCB0aGUgY3VycmVudCBzb25nXG4gICAgICBzZXRDdXJyZW50VGltZSgwKTtcbiAgICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgICAgIHNldFNvbmdTdGFydFRpbWUobmV3IERhdGUoKSk7XG4gICAgICBcbiAgICAgIC8vIElmIHJlcGVhdCBvbmNlLCB0dXJuIG9mZiByZXBlYXQgYWZ0ZXIgcGxheWluZyBvbmNlXG4gICAgICBpZiAocmVwZWF0TW9kZSA9PT0gJ29uY2UnKSB7XG4gICAgICAgIHNldFJlcGVhdE1vZGUoJ29mZicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBXaGVuIGEgc29uZyBlbmRzLCBhdXRvbWF0aWNhbGx5IHBsYXkgdGhlIG5leHQgb25lXG4gICAgYXdhaXQgaGFuZGxlTmV4dCgpO1xufTtcblxuICBjb25zdCByZW5kZXJDb250ZW50ID0gKCkgPT4ge1xuICAgIGlmIChjdXJyZW50UGFnZSA9PT0gJ3BsYXlsaXN0cycpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxQbGF5bGlzdHNQYWdlIFxuICAgICAgICAgIHBsYXlsaXN0cz17cGxheWxpc3RzfSBcbiAgICAgICAgICBvbkJhY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKCdtYWluJyl9IFxuICAgICAgICAgIG9uU29uZ1BsYXk9e2hhbmRsZVNvbmdQbGF5fVxuICAgICAgICAgIG9uQWRkVG9RdWV1ZT17aGFuZGxlQWRkVG9RdWV1ZX1cbiAgICAgICAgICBvbkNyZWF0ZVBsYXlsaXN0PXsoKSA9PiBzZXRTaG93Q3JlYXRlUGxheWxpc3RNb2RhbCh0cnVlKX1cbiAgICAgICAgICBvbkRlbGV0ZVBsYXlsaXN0PXtkZWxldGVQbGF5bGlzdH1cbiAgICAgICAgICBvblJlbmFtZVBsYXlsaXN0PXtyZW5hbWVQbGF5bGlzdH1cbiAgICAgICAgICBvblJlbW92ZVNvbmdGcm9tUGxheWxpc3Q9e3JlbW92ZVNvbmdGcm9tUGxheWxpc3R9XG4gICAgICAgICAgaW1hZ2VVcmxzPXtpbWFnZVVybHN9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY3VycmVudFBhZ2UgPT09ICdsaWtlZCcpIHtcbiAgICAgIHJldHVybiA8TGlrZWRTb25nc1BhZ2Ugc29uZ3M9e2xpa2VkU29uZ3N9IG9uQmFjaz17KCkgPT4gc2V0Q3VycmVudFBhZ2UoJ21haW4nKX0gb25Tb25nUGxheT17aGFuZGxlU29uZ1BsYXl9IG9uQWRkVG9RdWV1ZT17aGFuZGxlQWRkVG9RdWV1ZX0gaW1hZ2VVcmxzPXtpbWFnZVVybHN9Lz47XG4gICAgfVxuXG4gICAgc3dpdGNoIChhY3RpdmVUYWIpIHtcbiAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICByZXR1cm4gPEhvbWVQYWdlXG4gICAgICAgICAgICAgICAgc29uZ3M9e2Rpc3BsYXllZFNvbmdzfVxuICAgICAgICAgICAgICAgIG9uU29uZ1BsYXk9e2hhbmRsZVNvbmdQbGF5fVxuICAgICAgICAgICAgICAgIGZvcm1hdE51bWJlcj17Zm9ybWF0TnVtYmVyfVxuICAgICAgICAgICAgICAgIG9uQWRkVG9QbGF5bGlzdD17aGFuZGxlQWRkVG9QbGF5bGlzdH1cbiAgICAgICAgICAgICAgICBvbkFkZFRvUXVldWU9e2hhbmRsZUFkZFRvUXVldWV9XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmxzPXtpbWFnZVVybHN9XG4gICAgICAgICAgICAgICAgb25Mb2FkTW9yZT17bG9hZE1vcmVTb25nc31cbiAgICAgICAgICAgICAgICBoYXNNb3JlU29uZ3M9e2Rpc3BsYXlDb3VudCA8IHNvbmdzLmxlbmd0aH1cbiAgICAgICAgICAgICAgLz47XG4gICAgICBjYXNlICdzZWFyY2gnOlxuICAgICAgICByZXR1cm4gPFNlYXJjaFBhZ2VcbiAgICAgICAgICAgICAgc29uZ3M9e3NvbmdzfVxuICAgICAgICAgICAgICBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX1cbiAgICAgICAgICAgICAgZm9ybWF0TnVtYmVyPXtmb3JtYXROdW1iZXJ9XG4gICAgICAgICAgICAgIG9uQWRkVG9QbGF5bGlzdD17aGFuZGxlQWRkVG9QbGF5bGlzdH1cbiAgICAgICAgICAgICAgb25BZGRUb1F1ZXVlPXtoYW5kbGVBZGRUb1F1ZXVlfVxuICAgICAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICAgICAgc2V0SW1hZ2VVcmxzPXtzZXRJbWFnZVVybHN9XG4gICAgICAgICAgICAvPjtcbiAgICAgIGNhc2UgJ3NldHRpbmdzJzpcbiAgICAgICAgcmV0dXJuIDxTZXR0aW5nc1BhZ2Ugb25QbGF5bGlzdHNDbGljaz17KCkgPT4gc2V0Q3VycmVudFBhZ2UoJ3BsYXlsaXN0cycpfSBvbkxpa2VkQ2xpY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKCdsaWtlZCcpfSAvPjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiA8SG9tZVBhZ2VcbiAgICAgICAgICAgICAgc29uZ3M9e2Rpc3BsYXllZFNvbmdzfVxuICAgICAgICAgICAgICBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX1cbiAgICAgICAgICAgICAgZm9ybWF0TnVtYmVyPXtmb3JtYXROdW1iZXJ9XG4gICAgICAgICAgICAgIG9uQWRkVG9QbGF5bGlzdD17aGFuZGxlQWRkVG9QbGF5bGlzdH1cbiAgICAgICAgICAgICAgb25BZGRUb1F1ZXVlPXtoYW5kbGVBZGRUb1F1ZXVlfVxuICAgICAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICAgICAgb25Mb2FkTW9yZT17bG9hZE1vcmVTb25nc31cbiAgICAgICAgICAgICAgaGFzTW9yZVNvbmdzPXtkaXNwbGF5Q291bnQgPCBzb25ncy5sZW5ndGh9XG4gICAgICAgICAgICAvPjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdGhlbWVDbGFzc2VzID0gaXNEYXJrTW9kZSBcbiAgICA/ICdiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlJyBcbiAgICA6ICdiZy1ncmF5LTUwIHRleHQtZ3JheS05MDAnO1xuY29uc3Qgc2V0Q3VycmVudFRpbWVTdGF0ZSA9IHNldEN1cnJlbnRUaW1lO1xuXG4gIHJldHVybiAoXG4gICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YG1pbi1oLXNjcmVlbiAke3RoZW1lQ2xhc3Nlc30gcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuYH0+XG4gICAgICAgIHsvKiBNYWluIENvbnRlbnQgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwICR7Y3VycmVudFNvbmcgPyAncGItMzYnIDogJ3BiLTIwJ31gfT5cbiAgICAgICAgICB7cmVuZGVyQ29udGVudCgpfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQm90dG9tIE5hdmlnYXRpb24gKi99XG4gICAgICAgIHtjdXJyZW50UGFnZSA9PT0gJ21haW4nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZpeGVkIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wICR7aXNEYXJrTW9kZSA/ICdiZy1ncmF5LTgwMCBib3JkZXItZ3JheS03MDAnIDogJ2JnLXdoaXRlIGJvcmRlci1ncmF5LTIwMCd9IGJvcmRlci10IHotMzBgfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1hcm91bmQgcHktM1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdob21lJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgc3BhY2UteS0xIHAtMiB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiID09PSAnaG9tZScgPyAndGV4dC1wdXJwbGUtNDAwJyA6IGlzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCdcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxIb21lSWNvbiBzaXplPXsyNH0gLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzXCI+SG9tZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIoJ3NlYXJjaCcpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHNwYWNlLXktMSBwLTIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiA9PT0gJ3NlYXJjaCcgPyAndGV4dC1wdXJwbGUtNDAwJyA6IGlzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCdcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxTZWFyY2ggc2l6ZT17MjR9IC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14c1wiPlNlYXJjaDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIoJ3NldHRpbmdzJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgc3BhY2UteS0xIHAtMiB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiID09PSAnc2V0dGluZ3MnID8gJ3RleHQtcHVycGxlLTQwMCcgOiBpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS02MDAnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2V0dGluZ3Mgc2l6ZT17MjR9IC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14c1wiPlNldHRpbmdzPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBNdXNpYyBQbGF5ZXIgLSBPbmx5IHNob3cgaWYgY3VycmVudFNvbmcgZXhpc3RzICovfVxuICAgICAgICB7Y3VycmVudFNvbmcgJiYgKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7IWlzUGxheWVyTWF4aW1pemVkID8gKFxuICAgICAgICAgICAgICA8TWluaW1pemVkUGxheWVyXG4gICAgICAgICAgICAgICAgc29uZz17Y3VycmVudFNvbmd9XG4gICAgICAgICAgICAgICAgaXNQbGF5aW5nPXtpc1BsYXlpbmd9XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw9e2ltYWdlVXJsc1tjdXJyZW50U29uZy5pbWdfaWRdfVxuICAgICAgICAgICAgICAgIG9uVG9nZ2xlUGxheT17dG9nZ2xlUGxheX1cbiAgICAgICAgICAgICAgICBvbk1heGltaXplPXt0b2dnbGVQbGF5ZXJTaXplfVxuICAgICAgICAgICAgICAgIG9uUHJldmlvdXM9e2hhbmRsZVByZXZpb3VzfVxuICAgICAgICAgICAgICAgIG9uTmV4dD17aGFuZGxlTmV4dH1cbiAgICAgICAgICAgICAgICBvbkNsb3NlPXtjbG9zZVBsYXllcn1cbiAgICAgICAgICAgICAgICBvblRvZ2dsZUxpa2U9eygpID0+IGhhbmRsZVRvZ2dsZUxpa2UoY3VycmVudFNvbmcuaWQpfVxuICAgICAgICAgICAgICAgIGZvcm1hdE51bWJlcj17Zm9ybWF0TnVtYmVyfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lPXtjdXJyZW50VGltZX1cbiAgICAgICAgICAgICAgICBkdXJhdGlvbj17ZHVyYXRpb259XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8TWF4aW1pemVkUGxheWVyXG4gICAgICAgICAgICAgICAgc29uZz17Y3VycmVudFNvbmd9XG4gICAgICAgICAgICAgICAgaXNQbGF5aW5nPXtpc1BsYXlpbmd9XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw9e2ltYWdlVXJsc1tjdXJyZW50U29uZy5pbWdfaWRdfVxuICAgICAgICAgICAgICAgIG9uVG9nZ2xlUGxheT17dG9nZ2xlUGxheX1cbiAgICAgICAgICAgICAgICBvbk1pbmltaXplPXt0b2dnbGVQbGF5ZXJTaXplfVxuICAgICAgICAgICAgICAgIG9uUHJldmlvdXM9e2hhbmRsZVByZXZpb3VzfVxuICAgICAgICAgICAgICAgIG9uTmV4dD17aGFuZGxlTmV4dH1cbiAgICAgICAgICAgICAgICBvblRvZ2dsZUxpa2U9eygpID0+IGhhbmRsZVRvZ2dsZUxpa2UoY3VycmVudFNvbmcuaWQpfVxuICAgICAgICAgICAgICAgIGZvcm1hdE51bWJlcj17Zm9ybWF0TnVtYmVyfVxuICAgICAgICAgICAgICAgIG9uQWRkVG9QbGF5bGlzdD17KCkgPT4gaGFuZGxlQWRkVG9QbGF5bGlzdChjdXJyZW50U29uZyl9XG4gICAgICAgICAgICAgICAgY3VycmVudFRpbWU9e2N1cnJlbnRUaW1lfVxuICAgICAgICAgICAgICAgIGR1cmF0aW9uPXtkdXJhdGlvbn1cblxuICAgICAgICAgICAgICBzZXRDdXJyZW50VGltZT17KHNlZWtUaW1lKSA9PiB7XG4gIGlmIChhdWRpb1JlZi5jdXJyZW50ICYmICFpc05hTihhdWRpb1JlZi5jdXJyZW50LmR1cmF0aW9uKSkge1xuICAgIHNldElzRXh0ZXJuYWxseVNlZWtpbmcodHJ1ZSk7XG4gICAgYXVkaW9SZWYuY3VycmVudC5jdXJyZW50VGltZSA9IHNlZWtUaW1lO1xuICAgIHNldEN1cnJlbnRUaW1lU3RhdGUoc2Vla1RpbWUpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0SXNFeHRlcm5hbGx5U2Vla2luZyhmYWxzZSksIDIwMCk7XG4gIH0gZWxzZSB7XG4gICAgc2V0UGVuZGluZ1NlZWtUaW1lKHNlZWtUaW1lKTsgLy8gV2lsbCBhcHBseSBvbkxvYWRlZE1ldGFkYXRhXG4gIH1cbn19XG5cblxuXG4gICAgICAgICAgICAgICAgdm9sdW1lPXt2b2x1bWV9XG4gICAgICAgICAgICAgICAgc2V0Vm9sdW1lPXtzZXRWb2x1bWV9XG4gICAgICAgICAgICAgICAgaXNTZWVraW5nPXtpc1NlZWtpbmd9XG4gICAgICAgICAgICAgICAgc2V0SXNTZWVraW5nPXtzZXRJc1NlZWtpbmd9XG4gICAgICAgICAgICAgICAgcXVldWU9e3F1ZXVlfVxuICAgICAgICAgICAgICAgIG9uUmVtb3ZlRnJvbVF1ZXVlPXtyZW1vdmVGcm9tUXVldWV9XG4gICAgICAgICAgICAgICAgb25Tb25nUGxheT17aGFuZGxlU29uZ1BsYXl9XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmxzPXtpbWFnZVVybHN9XG4gICAgICAgICAgICAgICAgaXNTaHVmZmxlRW5hYmxlZD17aXNTaHVmZmxlRW5hYmxlZH1cbiAgICAgICAgICAgICAgICBzZXRJc1NodWZmbGVFbmFibGVkPXtzZXRJc1NodWZmbGVFbmFibGVkfVxuICAgICAgICAgICAgICAgIHJlcGVhdE1vZGU9e3JlcGVhdE1vZGV9XG4gICAgICAgICAgICAgICAgc2V0UmVwZWF0TW9kZT17c2V0UmVwZWF0TW9kZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC8+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIE1vZGFscyAqL31cbiAgICAgICAgPENyZWF0ZVBsYXlsaXN0TW9kYWxcbiAgICAgICAgICBpc09wZW49e3Nob3dDcmVhdGVQbGF5bGlzdE1vZGFsfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dDcmVhdGVQbGF5bGlzdE1vZGFsKGZhbHNlKX1cbiAgICAgICAgICBvbkNyZWF0ZVBsYXlsaXN0PXtjcmVhdGVQbGF5bGlzdH1cbiAgICAgICAgLz5cblxuICAgICAgICA8QWRkVG9QbGF5bGlzdE1vZGFsXG4gICAgICAgICAgaXNPcGVuPXtzaG93QWRkVG9QbGF5bGlzdE1vZGFsfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICAgIHNldFNob3dBZGRUb1BsYXlsaXN0TW9kYWwoZmFsc2UpO1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRTb25nRm9yUGxheWxpc3QobnVsbCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBzb25nPXtzZWxlY3RlZFNvbmdGb3JQbGF5bGlzdH1cbiAgICAgICAgICBwbGF5bGlzdHM9e3BsYXlsaXN0c31cbiAgICAgICAgICBvbkFkZFRvUGxheWxpc3Q9e2FkZFNvbmdUb1BsYXlsaXN0fVxuICAgICAgICAgIG9uQ3JlYXRlUGxheWxpc3Q9eygpID0+IHtcbiAgICAgICAgICAgIHNldFNob3dBZGRUb1BsYXlsaXN0TW9kYWwoZmFsc2UpO1xuICAgICAgICAgICAgc2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwodHJ1ZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICBzZXRJbWFnZVVybHM9e3NldEltYWdlVXJsc31cbiAgICAgICAgLz5cbiAgICAgICAgPGF1ZGlvXG4gICAgICAgICAgcmVmPXthdWRpb1JlZn1cbiAgICAgICAgICBzcmM9e2F1ZGlvVXJsID8/IHVuZGVmaW5lZH1cbiAgICAgICAgICBvbkVuZGVkPXtoYW5kbGVTb25nRW5kfVxuICAgICAgICAgIG9uVGltZVVwZGF0ZT17KCkgPT4ge1xuICAgICAgICAgIGlmIChhdWRpb1JlZi5jdXJyZW50ICYmICFpc1NlZWtpbmcgJiYgIWlzRXh0ZXJuYWxseVNlZWtpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhdWRpb1JlZi5jdXJyZW50LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgc3RhdGUgaWYgdGhlIGRpZmZlcmVuY2UgaXMgc2lnbmlmaWNhbnRcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50VGltZSAtIGN1cnJlbnQpID4gMC4yNSkge1xuICAgICAgICAgICAgICBzZXRDdXJyZW50VGltZShjdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH19XG5cblxuICAgICAgICAgIG9uTG9hZGVkTWV0YWRhdGE9e2hhbmRsZUxvYWRlZE1ldGFkYXRhfVxuICAgICAgICAgIG9uVm9sdW1lQ2hhbmdlPXsoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXVkaW9SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICBzZXRWb2x1bWUoYXVkaW9SZWYuY3VycmVudC52b2x1bWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ25vbmUnIH19XG4gICAgICAgIC8+XG5cbiAgICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNdXNpY1BsYXllckFwcCgpIHtcbiAgcmV0dXJuIChcbiAgICA8QXV0aFdyYXBwZXI+XG4gICAgICA8VG9hc3RlciBwb3NpdGlvbj1cImJvdHRvbS1jZW50ZXJcIiAvPlxuICAgICAgPE11c2ljUGxheWVyQ29udGVudCAvPlxuICAgIDwvQXV0aFdyYXBwZXI+XG4gICk7XG59Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJIb21lIiwiSG9tZUljb24iLCJTZWFyY2giLCJTZXR0aW5ncyIsIkhvbWVQYWdlIiwiU2VhcmNoUGFnZSIsIlNldHRpbmdzUGFnZSIsIlBsYXlsaXN0c1BhZ2UiLCJMaWtlZFNvbmdzUGFnZSIsIk1pbmltaXplZFBsYXllciIsIk1heGltaXplZFBsYXllciIsIkNyZWF0ZVBsYXlsaXN0TW9kYWwiLCJBZGRUb1BsYXlsaXN0TW9kYWwiLCJBdXRoV3JhcHBlciIsInVzZUF1dGgiLCJ1c2VTdXBhYmFzZURhdGEiLCJ1c2VRdWV1ZSIsInVzZVRoZW1lIiwiVG9hc3RlciIsInRvYXN0IiwiTXVzaWNQbGF5ZXJDb250ZW50IiwidXNlciIsInNvbmdzIiwicGxheWxpc3RzIiwibGlrZWRTb25ncyIsImxhc3RQbGF5ZWRTb25nIiwibG9hZGluZyIsInRvZ2dsZUxpa2UiLCJjcmVhdGVQbGF5bGlzdCIsImRlbGV0ZVBsYXlsaXN0IiwicmVuYW1lUGxheWxpc3QiLCJhZGRTb25nVG9QbGF5bGlzdCIsInJlbW92ZVNvbmdGcm9tUGxheWxpc3QiLCJyZWNvcmRMaXN0ZW5pbmdIaXN0b3J5Iiwic3RvcEN1cnJlbnRTb25nVHJhY2tpbmciLCJnZXRQZXJzb25hbGl6ZWRTb25ncyIsImdldFNtYXJ0UGVyc29uYWxpemVkU29uZ3MiLCJxdWV1ZSIsImFkZFRvUXVldWUiLCJyZW1vdmVGcm9tUXVldWUiLCJnZXROZXh0U29uZ0Zyb21RdWV1ZSIsImNsZWFyUXVldWUiLCJoYXNRdWV1ZSIsImFjdGl2ZVRhYiIsInNldEFjdGl2ZVRhYiIsImN1cnJlbnRQYWdlIiwic2V0Q3VycmVudFBhZ2UiLCJjdXJyZW50U29uZyIsInNldEN1cnJlbnRTb25nIiwiaXNQbGF5aW5nIiwic2V0SXNQbGF5aW5nIiwiaXNQbGF5ZXJNYXhpbWl6ZWQiLCJzZXRJc1BsYXllck1heGltaXplZCIsInNob3dDcmVhdGVQbGF5bGlzdE1vZGFsIiwic2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwiLCJzaG93QWRkVG9QbGF5bGlzdE1vZGFsIiwic2V0U2hvd0FkZFRvUGxheWxpc3RNb2RhbCIsInNlbGVjdGVkU29uZ0ZvclBsYXlsaXN0Iiwic2V0U2VsZWN0ZWRTb25nRm9yUGxheWxpc3QiLCJoYXNTZXRMYXN0UGxheWVkU29uZyIsInNldEhhc1NldExhc3RQbGF5ZWRTb25nIiwibGFzdFBsYXllZFNvbmdEaXNtaXNzZWQiLCJzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZCIsImlzRGFya01vZGUiLCJ0b2dnbGVUaGVtZSIsImRpc3BsYXlDb3VudCIsInNldERpc3BsYXlDb3VudCIsImltYWdlVXJscyIsInNldEltYWdlVXJscyIsImF1ZGlvVXJsIiwic2V0QXVkaW9VcmwiLCJhdWRpb1JlZiIsImN1cnJlbnRUaW1lIiwic2V0Q3VycmVudFRpbWUiLCJkdXJhdGlvbiIsInNldER1cmF0aW9uIiwidm9sdW1lIiwic2V0Vm9sdW1lIiwiaXNTZWVraW5nIiwic2V0SXNTZWVraW5nIiwicGVuZGluZ1NlZWtUaW1lIiwic2V0UGVuZGluZ1NlZWtUaW1lIiwiaXNFeHRlcm5hbGx5U2Vla2luZyIsInNldElzRXh0ZXJuYWxseVNlZWtpbmciLCJyZWNvbW1lbmRlZFF1ZXVlIiwic2V0UmVjb21tZW5kZWRRdWV1ZSIsInBsYXllZFNvbmdzIiwic2V0UGxheWVkU29uZ3MiLCJTZXQiLCJwZXJzb25hbGl6ZWRMaXN0Iiwic2V0UGVyc29uYWxpemVkTGlzdCIsImN1cnJlbnRTb25nSW5kZXgiLCJzZXRDdXJyZW50U29uZ0luZGV4IiwibGlzdGVuZWRTb25ncyIsInNldExpc3RlbmVkU29uZ3MiLCJpc0ZldGNoaW5nTW9yZSIsInNldElzRmV0Y2hpbmdNb3JlIiwiY3VycmVudEJhdGNoTGlzdGVuZWRTb25ncyIsInNldEN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MiLCJzb25nU3RhcnRUaW1lIiwic2V0U29uZ1N0YXJ0VGltZSIsImJhdGNoU3RhcnRJbmRleCIsInNldEJhdGNoU3RhcnRJbmRleCIsImlzU2h1ZmZsZUVuYWJsZWQiLCJzZXRJc1NodWZmbGVFbmFibGVkIiwicmVwZWF0TW9kZSIsInNldFJlcGVhdE1vZGUiLCJsb2FkTW9yZVNvbmdzIiwicHJldiIsImRpc3BsYXllZFNvbmdzIiwic2xpY2UiLCJsb2FkQXVkaW8iLCJmaWxlX2lkIiwidXJsIiwiY3VycmVudCIsImF1ZGlvIiwiaXNOYU4iLCJwbGF5IiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwicGF1c2UiLCJmZXRjaEltYWdlcyIsIm5ld1VybHMiLCJzb25nc1RvTG9hZCIsInNvbmciLCJpZCIsImltZ19pZCIsInBsYXlsaXN0IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImxvZyIsImxvYWRMYXN0UGxheWVkSW1hZ2UiLCJpbml0aWFsUmVjcyIsImZpbHRlcmVkIiwiZmlsdGVyIiwiaGFzIiwidG9TdHJpbmciLCJuZXdQZXJzb25hbGl6ZWRMaXN0IiwibmV3U2V0IiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwiaGFuZGxlU29uZ1BsYXkiLCJsaXN0ZW5EdXJhdGlvbiIsIkRhdGUiLCJnZXRUaW1lIiwibmFtZSIsInRvRml4ZWQiLCJleGlzdHMiLCJzb21lIiwicyIsInVwZGF0ZWQiLCJtYXAiLCJyZWNzIiwiaGFuZGxlQWRkVG9RdWV1ZSIsInN1Y2Nlc3MiLCJ0b2dnbGVQbGF5IiwidG9nZ2xlUGxheWVyU2l6ZSIsImNsb3NlUGxheWVyIiwiaGFuZGxlVG9nZ2xlTGlrZSIsInNvbmdJZCIsImlzTGlrZWQiLCJoYW5kbGVQcmV2aW91cyIsInByZXZJbmRleCIsInByZXZTb25nIiwibmV3VXJsIiwiY3VycmVudEluZGV4IiwiZmluZEluZGV4IiwibmV4dEluZGV4IiwibmV4dFNvbmciLCJoYW5kbGVMb2FkZWRNZXRhZGF0YSIsImxvYWRlZER1cmF0aW9uIiwiaXNGaW5pdGUiLCJlcnIiLCJzZXRUaW1lb3V0IiwiaGFuZGxlTmV4dCIsIm5leHRRdWV1ZVNvbmciLCJuZXdSZWNzIiwiZXhpc3RpbmciLCJTdHJpbmciLCJ3YXJuIiwiZm9ybWF0TnVtYmVyIiwibnVtIiwiaGFuZGxlQWRkVG9QbGF5bGlzdCIsImhhbmRsZVNvbmdFbmQiLCJyZW5kZXJDb250ZW50Iiwib25CYWNrIiwib25Tb25nUGxheSIsIm9uQWRkVG9RdWV1ZSIsIm9uQ3JlYXRlUGxheWxpc3QiLCJvbkRlbGV0ZVBsYXlsaXN0Iiwib25SZW5hbWVQbGF5bGlzdCIsIm9uUmVtb3ZlU29uZ0Zyb21QbGF5bGlzdCIsIm9uQWRkVG9QbGF5bGlzdCIsIm9uTG9hZE1vcmUiLCJoYXNNb3JlU29uZ3MiLCJvblBsYXlsaXN0c0NsaWNrIiwib25MaWtlZENsaWNrIiwidGhlbWVDbGFzc2VzIiwic2V0Q3VycmVudFRpbWVTdGF0ZSIsImRpdiIsImNsYXNzTmFtZSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzaXplIiwic3BhbiIsImltYWdlVXJsIiwib25Ub2dnbGVQbGF5Iiwib25NYXhpbWl6ZSIsIm9uUHJldmlvdXMiLCJvbk5leHQiLCJvbkNsb3NlIiwib25Ub2dnbGVMaWtlIiwib25NaW5pbWl6ZSIsInNlZWtUaW1lIiwib25SZW1vdmVGcm9tUXVldWUiLCJpc09wZW4iLCJyZWYiLCJzcmMiLCJ1bmRlZmluZWQiLCJvbkVuZGVkIiwib25UaW1lVXBkYXRlIiwiTWF0aCIsImFicyIsIm9uTG9hZGVkTWV0YWRhdGEiLCJvblZvbHVtZUNoYW5nZSIsInN0eWxlIiwiZGlzcGxheSIsIk11c2ljUGxheWVyQXBwIiwicG9zaXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ })

});